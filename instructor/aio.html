<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Marine Biological Data Mobilization Workshop 2024: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css">
<script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../favicons/incubator/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicons/incubator/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../favicons/incubator/favicon-16x16.png">
<link rel="manifest" href="../favicons/incubator/site.webmanifest">
<link rel="mask-icon" href="../favicons/incubator/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Marine data mobilization workshop for Biology and Ecosystem Essential Ocean Variables (Bio-Eco EOV) as a Contribution to the UN Decade on Ocean Science for Sustainable Development" src="../assets/images/incubator-logo.svg"><span class="badge text-bg-warning">
          <abbr title="This lesson is in the alpha phase, which means that it has been taught once and lesson authors are iterating on feedback.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-triangle" style="border-radius: 5px"></i>
              Alpha
            </a>
            <span class="visually-hidden">This lesson is in the alpha phase, which means that it has been taught once and lesson authors are iterating on feedback.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='../aio.html';">Learner View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Marine data mobilization workshop for Biology and Ecosystem Essential Ocean Variables (Bio-Eco EOV) as a Contribution to the UN Decade on Ocean Science for Sustainable Development" src="../assets/images/incubator-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Marine Biological Data Mobilization Workshop 2024
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Marine Biological Data Mobilization Workshop 2024
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<hr>
<li><a class="dropdown-item" href="reference.html">Reference</a></li>
<li><a class="dropdown-item" href="about.html">About</a></li>
<li><a class="dropdown-item" href="helpful-tutorials.html">Helpful Tutorials</a></li>
<li><a class="dropdown-item" href="edna-extension.html">DNA-derived Data Extension</a></li>
<li><a class="dropdown-item" href="acoustic-telemetry.html">Acoustic (and Satellite) Telemetry</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Marine Biological Data Mobilization Workshop 2024
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../aio.html">Learner View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Marine Biological Data Mobilization Workshop 2024</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-introduction.html">1. Introduction to Darwin Core</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-break.html">2. Social Break</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-data-cleaning.html">3. Data Cleaning</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-create-schema.html">4. Darwin Core and Extension Schemas</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-break.html">5. Social Break</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-qa-qc.html">6. QA/QC</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-validation-and-publishing.html">7. Metadata and publishing</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08-post-workshop.html">8. Continuing the Conversation</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr>
<li><a class="dropdown-item" href="reference.html">Reference</a></li>
<li><a class="dropdown-item" href="about.html">About</a></li>
<li><a class="dropdown-item" href="helpful-tutorials.html">Helpful Tutorials</a></li>
<li><a class="dropdown-item" href="edna-extension.html">DNA-derived Data Extension</a></li>
<li><a class="dropdown-item" href="acoustic-telemetry.html">Acoustic (and Satellite) Telemetry</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-01-introduction"><p>Content from <a href="01-introduction.html">Introduction to Darwin Core</a></p>
<hr>
<p>Last updated on 2025-02-28 |

        <a href="https://github.com/MathewBiddle/test_workshop/edit/main/episodes/01-introduction.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 90 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is Darwin Core?</li>
<li>What is a Darwin Core Archive?</li>
<li>Why do people use Darwin Core for their data?</li>
<li>What are the required Darwin Core terms for sharing to OBIS?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Understand the purpose of Darwin Core.</li>
<li>Understand how to map data to Darwin Core.</li>
<li>Plan for mapping to Darwin Core.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="darwin-core---a-global-community-of-data-sharing-and-integration">Darwin Core - A global community of data sharing and
integration<a class="anchor" aria-label="anchor" href="#darwin-core---a-global-community-of-data-sharing-and-integration"></a>
</h2>
<hr class="half-width">
<p>Darwin Core is a data standard to mobilize and share biodiversity
data. Over the years, the Darwin Core standard has expanded to enable
exchange and sharing of diverse types of biological observations from
citizen scientists, ecological monitoring, eDNA, animal telemetry,
taxonomic treatments, and many others. Darwin Core is applicable to any
observation of an organism (scientific name, OTU, or other methods of
defining a species) at a particular place and time. In Darwin Core this
is an <code>occurrence</code>. To learn more about the foundations of
Darwin Core read <a href="https://doi.org/10.1371/journal.pone.0029715" class="external-link">Wieczorek et
al. 2012</a>.</p>
<div class="section level3">
<h3 id="demonstrated-use-of-darwin-core">Demonstrated Use of Darwin Core<a class="anchor" aria-label="anchor" href="#demonstrated-use-of-darwin-core"></a>
</h3>
<p>The power of Darwin Core is most evident in the data aggregators that
harvest data using that standard. The one we will refer to most
frequently in this workshop is the <a href="https://obis.org/" class="external-link">Ocean
Biodiversity Information System</a> (learn more about <a href="https://youtu.be/E6NblAC-1uE" class="external-link">OBIS</a>). Another prominent one is
the <a href="https://www.gbif.org/" class="external-link">Global Biodiversity Information
Facility</a> (learn more about <a href="https://vimeo.com/434831655" class="external-link">GBIF</a>). It’s also used by the
Atlas of Living Australia, iDigBio, among others.</p>
<div class="section level4">
<h4 id="darwin-core-archives">Darwin Core Archives<a class="anchor" aria-label="anchor" href="#darwin-core-archives"></a>
</h4>
<p>Darwin Core Archives are what OBIS and GBIF harvest into their
systems. Fortunately the software created and maintained by GBIF, the <a href="https://www.gbif.org/ipt" class="external-link">Integrated Publishing Toolkit</a>,
produces Darwin Core Archives for us. Darwin Core Archives are pretty
simple. It’s a zipped folder containing the data (one or several files
depending on how many extensions you use), an Ecological Metadata
Language (EML) XML file, and a meta.xml file that describes what’s in
the zipped folder.</p>
<div id="challenge" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge" class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p>Download this <a href="https://ipt-obis.gbif.us/archive.do?r=tpwd_harc_texasaransasbay_bagseine&amp;v=2.3" class="external-link">Darwin
Core Archive</a> and examine what’s in it. Did you find anything unusual
or that you don’t understand what it is?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<pre class="folder"><code>dwca-tpwd_harc_texasaransasbay_bagseine-v2.3
 |-- eml.xml
 |-- event.txt
 |-- extendedmeasurementorfact.txt
 |-- meta.xml
 `-- occurrence.txt</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="darwin-core-mapping">Darwin Core Mapping<a class="anchor" aria-label="anchor" href="#darwin-core-mapping"></a>
</h2>
<hr class="half-width">
<p>Now that we understand a bit more about why Darwin Core was created
and how it is used today we can begin the work of mapping data to the
standard. The key resource when mapping data to Darwin Core is the <a href="https://dwc.tdwg.org/terms/" class="external-link">Darwin Core Quick Reference
Guide</a>. This document provides an easy-to-read reference of the
currently recommended terms for the Darwin Core standard. There are a
lot of terms there and you won’t use them all for every dataset (or even
use them all on any dataset) but as you apply the standard to more
datasets you’ll become more familiar with the terms.</p>
<div id="tip" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip" class="callout-inner">
<h3 class="callout-title">
<span class="emoji" data-emoji="pushpin">📌</span> Tip</h3>
<div class="callout-content">
<p>If your raw column headers are Darwin Core terms verbatim then you
can skip this step! Next time you plan data collection use the standard
DwC term headers!</p>
</div>
</div>
</div>
<div id="challenge-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1" class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p>Find the matching Darwin Core term for these column headers.</p>
<ol style="list-style-type: decimal">
<li>SAMPLE_DATE (example data: 09-MAR-21 05.45.00.000000000 PM)</li>
<li>lat (example data: 32.6560)</li>
<li>depth_m (example data: 6 meters)</li>
<li>COMMON_NAME (example data: staghorn coral)</li>
<li>percent_cover (example data: 15)</li>
<li>COUNT (example data: 2 Females)</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li><a href="https://dwc.tdwg.org/terms/#dwc:eventDate" class="external-link"><code>eventDate</code></a></li>
<li><a href="https://dwc.tdwg.org/terms/#dwc:decimalLatitude" class="external-link"><code>decimalLatitude</code></a></li>
<li>
<a href="https://dwc.tdwg.org/terms/#dwc:minimumDepthInMeters" class="external-link"><code>minimumDepthInMeters</code></a>
and <a href="https://dwc.tdwg.org/terms/#dwc:maximumDepthInMeters" class="external-link"><code>maximumDepthInMeters</code></a>
</li>
<li><a href="https://dwc.tdwg.org/terms/#dwc:vernacularName" class="external-link"><code>vernacularName</code></a></li>
<li>
<a href="https://dwc.tdwg.org/terms/#dwc:organismQuantity" class="external-link"><code>organismQuantity</code></a>
and <a href="https://dwc.tdwg.org/terms/#dwc:organismQuantityType" class="external-link"><code>organismQuantityType</code></a>
</li>
<li>This one is tricky- it’s two terms combined and will need to be
split. <a href="https://dwc.tdwg.org/terms/#dwc:individualCount" class="external-link"><code>indvidualCount</code></a>
and <a href="https://dwc.tdwg.org/terms/#dwc:sex" class="external-link"><code>sex</code></a>
</li>
</ol>
</div>
</div>
</div>
</div>
<div id="tip-1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-1" class="callout-inner">
<h3 class="callout-title">
<span class="emoji" data-emoji="pushpin">📌</span> Tip</h3>
<div class="callout-content">
<p>To make the mapping step easier on yourself, we recommend starting a
mapping document/spreadsheet (or document it as a comment in your
script). List out all of your column headers in one column and document
the appropriate Dawin Core term(s) in a second column. For example:</p>
<table class="table">
<thead><tr class="header">
<th>my term</th>
<th>DwC term</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>lat</td>
<td>decimalLatitude</td>
</tr>
<tr class="even">
<td>date</td>
<td>eventDate</td>
</tr>
<tr class="odd">
<td>species</td>
<td>scientificName</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="what-are-the-required-darwin-core-terms-for-publishing-to-obis">What are the <strong>required</strong> Darwin Core terms for
publishing to OBIS?<a class="anchor" aria-label="anchor" href="#what-are-the-required-darwin-core-terms-for-publishing-to-obis"></a>
</h2>
<hr class="half-width">
<p>When doing your mapping some required information may be missing.
Below are the Darwin Core terms that are required to share your data to
OBIS plus a few that are needed for GBIF.</p>
<table class="table">
<colgroup>
<col width="16%">
<col width="32%">
<col width="35%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th>Darwin Core Term</th>
<th>Definition</th>
<th>Comment</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:occurrenceID" class="external-link"><code>occurrenceID</code></a></td>
<td>An identifier for the Occurrence (as opposed to a particular digital
record of the occurrence). In the absence of a persistent global unique
identifier, construct one from a combination of identifiers in the
record that will most closely make the occurrenceID globally
unique.</td>
<td>To construct a globally unique identifier for each occurrence you
can usually concatenate station + date + scientific name (or something
similar) but you’ll need to check this is unique for each row in your
data. It is preferred to use the fields that are least likely to change
in the future for this. For ways to check the uniqueness of your
occurrenceIDs see the <a href="../%7B%7B%20page.root%20%7D%7D/06-qa-qc/index.html">QA / QC</a>
section of the workshop.</td>
<td>Station_95_Date_09JAN1997:14:35:00.000_Atractosteus_spatula</td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/terms/#dwc:basisOfRecord" class="external-link"><code>basisOfRecord</code></a></td>
<td>The specific nature of the data record.</td>
<td>Pick from these controlled vocabulary terms: <a href="http://rs.tdwg.org/dwc/terms/HumanObservation" class="external-link">HumanObservation</a>,
<a href="http://rs.tdwg.org/dwc/terms/MachineObservation" class="external-link">MachineObservation</a>,
<a href="http://rs.tdwg.org/dwc/terms/MaterialSample" class="external-link">MaterialSample</a>,
<a href="http://rs.tdwg.org/dwc/terms/PreservedSpecimen" class="external-link">PreservedSpecimen</a>,
<a href="http://rs.tdwg.org/dwc/terms/LivingSpecimen" class="external-link">LivingSpecimen</a>,
<a href="http://rs.tdwg.org/dwc/terms/FossilSpecimen" class="external-link">FossilSpecimen</a>,
<a href="http://rs.tdwg.org/dwc/terms/MaterialEntity" class="external-link">MaterialEntity</a>,
<a href="http://rs.tdwg.org/dwc/terms/Event" class="external-link">Event</a>, <a href="http://rs.tdwg.org/dwc/terms/Taxon" class="external-link">Taxon</a>, <a href="http://rs.tdwg.org/dwc/terms/Occurrence" class="external-link">Occurrence</a>, <a href="http://rs.tdwg.org/dwc/terms/MaterialCitation" class="external-link">MaterialCitation</a>
</td>
<td>HumanObservation</td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:scientificName" class="external-link"><code>scientificName</code></a></td>
<td>The full scientific name, with authorship and date information if
known. When forming part of an Identification, this should be the name
in lowest level taxonomic rank that can be determined. This term should
not contain identification qualifications, which should instead be
supplied in the <code>identificationQualifier</code> term.</td>
<td>Note that cf., aff., etc. need to be parsed out to the
<code>identificationQualifier</code> term. For a more thorough review of
<code>identificationQualifier</code> see <a href="https://doi.org/10.3389/fmars.2021.620702" class="external-link">this paper</a>.</td>
<td>Atractosteus spatula</td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/terms/#dwc:scientificNameID" class="external-link"><code>scientificNameID</code></a></td>
<td>An identifier for the nomenclatural (not taxonomic) details of a
scientific name.</td>
<td>Must be a WoRMS LSID for sharing to OBIS. Note that the numbers at
the end are the AphiaID from WoRMS.</td>
<td><a href="../urn:lsid:marinespecies.org:taxname:218214" class="uri">urn:lsid:marinespecies.org:taxname:218214</a></td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:eventDate" class="external-link"><code>eventDate</code></a></td>
<td>The date-time or interval during which an Event occurred. For
occurrences, this is the date-time when the event was recorded. Not
suitable for a time in a geological context.</td>
<td>Must follow <a href="https://en.wikipedia.org/wiki/ISO_8601" class="external-link">ISO
8601</a>. See more information on dates in the <a href="../%7B%7B%20page.root%20%7D%7D/03-data-cleaning/index.html">Data
Cleaning</a> section of the workshop.</td>
<td>2009-02-20T08:40Z</td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/terms/#dwc:decimalLatitude" class="external-link"><code>decimalLatitude</code></a></td>
<td>The geographic latitude (in decimal degrees, using the spatial
reference system given in geodeticDatum) of the geographic center of a
Location. Positive values are north of the Equator, negative values are
south of it. Legal values lie between -90 and 90, inclusive.</td>
<td>For OBIS and GBIF the required <code>geodeticDatum</code> is WGS84.
Uncertainty around the geographic center of a Location (e.g. when
sampling event was a transect) can be recorded in
<code>coordinateUncertaintyInMeters</code>. See more information on
coordinates in the <a href="../%7B%7B%20page.root%20%7D%7D/03-data-cleaning/index.html">Data
Cleaning</a> section of the workshop.</td>
<td>-41.0983423</td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:decimalLongitude" class="external-link"><code>decimalLongitude</code></a></td>
<td>The geographic longitude (in decimal degrees, using the spatial
reference system given in geodeticDatum) of the geographic center of a
Location. Positive values are east of the Greenwich Meridian, negative
values are west of it. Legal values lie between -180 and 180,
inclusive</td>
<td>For OBIS and GBIF the required <code>geodeticDatum</code> is WGS84.
See more information on coordinates in the <a href="../%7B%7B%20page.root%20%7D%7D/03-data-cleaning/index.html">Data
Cleaning</a> section of the workshop.</td>
<td>-121.1761111</td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/terms/#dwc:occurrenceStatus" class="external-link"><code>occurrenceStatus</code></a></td>
<td>A statement about the presence or absence of a Taxon at a
Location.</td>
<td>For OBIS, only valid values are <code>present</code> and
<code>absent</code>.</td>
<td>present</td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:countryCode" class="external-link"><code>countryCode</code></a></td>
<td>The standard code for the country in which the location occurs.</td>
<td>Use an <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2" class="external-link">ISO
3166-1-alpha-2</a> country code. Not required for OBIS but GBIF prefers
to have this for their system. For international waters, leave
blank.</td>
<td>US, MX, CA</td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/terms/#dwc:kingdom" class="external-link"><code>kingdom</code></a></td>
<td>The full scientific name of the kingdom in which the taxon is
classified.</td>
<td>Not required for OBIS but GBIF needs this to disambiguate scientific
names that are the same but in different kingdoms.</td>
<td>Animalia</td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwciri:geodeticDatum" class="external-link"><code>geodeticDatum</code></a></td>
<td>The ellipsoid, geodetic datum, or spatial reference system (SRS)
upon which the geographic coordinates given in decimalLatitude and
decimalLongitude as based.</td>
<td>Must be <a href="https://epsg.io/4326" class="external-link">WGS84</a> for data shared to
OBIS and GBIF but it’s best to state explicitly that it is.</td>
<td>WGS84</td>
</tr>
</tbody>
</table></section><section><h2 class="section-heading" id="what-other-terms-should-be-considered">What other terms should be considered?<a class="anchor" aria-label="anchor" href="#what-other-terms-should-be-considered"></a>
</h2>
<hr class="half-width">
<p>While these terms are not required for publishing data to OBIS, they
are extremely helpful for downstream users because without them the data
are less useful for future analyses. For instance, <code>depth</code> is
a crucial piece of information for marine observations, but it is not
always included. For the most part the ones listed below are not going
to be sitting there in the data, so you’ll have to determine what the
values should be and add them in. Really try your hardest to include
them if you can.</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="18%">
<col width="37%">
<col width="41%">
<col width="2%">
</colgroup>
<thead><tr class="header">
<th>Darwin Core Term</th>
<th>Definition</th>
<th>Comment</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:minimumDepthInMeters" class="external-link"><code>minimumDepthInMeters</code></a></td>
<td>The lesser depth of a range of depth below the local surface, in
meters.</td>
<td>There isn’t a single depth value so even if you have a single value
you’ll put that in both minimum and maximum depth fields.</td>
<td>0.1</td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/terms/#dwc:maximumDepthInMeters" class="external-link"><code>maximumDepthInMeters</code></a></td>
<td>The greater depth of a range of depth below the local surface, in
meters.</td>
<td>For observations above sea level consider using <a href="https://dwc.tdwg.org/terms/#dwc:minimumDistanceAboveSurfaceInMeters" class="external-link"><code>minimumDistanceAboveSurfaceInMeters</code></a>
and <a href="https://dwc.tdwg.org/terms/#dwc:maximumDistanceAboveSurfaceInMeters" class="external-link"><code>maximumDistanceAboveSurfaceInMeters</code></a>
</td>
<td>10.5</td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:coordinateUncertaintyInMeters" class="external-link"><code>coordinateUncertaintyInMeters</code></a></td>
<td>The horizontal distance (in meters) from the given decimalLatitude
and decimalLongitude describing the smallest circle containing the whole
of the Location. Leave the value empty if the uncertainty is unknown,
cannot be estimated, or is not applicable (because there are no
coordinates). Zero is not a valid value for this term</td>
<td>There’s always uncertainty associated with locations. Recording the
uncertainty is crucial for downstream analyses.</td>
<td>15</td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/terms/#dwc:samplingProtocol" class="external-link"><code>samplingProtocol</code></a></td>
<td>The names of, references to, or descriptions of the methods or
protocols used during an Event.</td>
<td></td>
<td>Bag Seine</td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:taxonRank" class="external-link"><code>taxonRank</code></a></td>
<td>The taxonomic rank of the most specific name in the
scientificName.</td>
<td>Also helps with disambiguation of scientific names.</td>
<td>Species</td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/terms/#dwc:organismQuantity" class="external-link"><code>organismQuantity</code></a></td>
<td>A number or enumeration value for the quantity of organisms.</td>
<td>OBIS also likes to see this in the Extended Measurement or Fact
extension.</td>
<td>2.6</td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:organismQuantityType" class="external-link"><code>organismQuantityType</code></a></td>
<td>The type of quantification system used for the quantity of
organisms.</td>
<td></td>
<td>Relative Abundance</td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/terms/#dwc:datasetName" class="external-link"><code>datasetName</code></a></td>
<td>The name identifying the data set from which the record was
derived.</td>
<td></td>
<td>TPWD HARC Texas Coastal Fisheries Aransas Bag Bay Seine</td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:dataGeneralizations" class="external-link"><code>dataGeneralizations</code></a></td>
<td>Actions taken to make the shared data less specific or complete than
in its original form. Suggests that alternative data of higher quality
may be available on request.</td>
<td>This veers somewhat into the realm of metadata and will not be
applicable to all datasets but if the data were modified such as due to
sensitive species then it’s important to note that for future
users.</td>
<td>Coordinates generalized from original GPS coordinates to the nearest
half degree grid cell</td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/terms/#dwc:informationWithheld" class="external-link"><code>informationWithheld</code></a></td>
<td>Additional information that exists, but that has not been shared in
the given record.</td>
<td>Also useful if the data have been modified this way for sensitive
species or for other reasons.</td>
<td>location information not given for endangered species</td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:institutionCode" class="external-link"><code>institutionCode</code></a></td>
<td>The name (or acronym) in use by the institution having custody of
the object(s) or information referred to in the record.</td>
<td></td>
<td>TPWD</td>
</tr>
</tbody>
</table>
<p>Other than these specific terms, work through the data that you have
and try to crosswalk it to the Darwin Core terms that match best.</p>
<div id="exercise" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>Create some crosswalk notes for your dataset.</p>
<p>Compare your data files to the table(s) above to devise a plan to
crosswalk your data columns into the DwC terms.</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Darwin Core isn’t difficult to apply, it just takes a little bit of
time.</li>
<li>Using Darwin Core allows datasets from across projects,
organizations, and countries to be integrated together.</li>
<li>Applying certain general principles to the data will make it easier
to map to Darwin Core.</li>
<li>Implementing Darwin Core makes data FAIR-er and means becoming part
of a community of people working together to understand species no
matter where they work or are based.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-02-break"><p>Content from <a href="02-break.html">Social Break</a></p>
<hr>
<p>Last updated on 2025-02-28 |

        <a href="https://github.com/MathewBiddle/test_workshop/edit/main/episodes/02-break.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<p><img src="https://imgs.xkcd.com/comics/standards_2x.png" alt="xkcd 0927 (standards)" class="figure"><em>Image credit: <a href="https://xkcd.com/" class="external-link">xkcd</a></em></p></section><section id="aio-03-data-cleaning"><p>Content from <a href="03-data-cleaning.html">Data Cleaning</a></p>
<hr>
<p>Last updated on 2025-02-28 |

        <a href="https://github.com/MathewBiddle/test_workshop/edit/main/episodes/03-data-cleaning.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 120 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How to convert dates to ISO?</li>
<li>How to match scientific names to WoRMS?</li>
<li>How to convert latitudes and longitudes to decimal degrees?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Aligning dates to the ISO 8601 standard.</li>
<li>Matching scientific names to WoRMS.</li>
<li>Converting latitude and longitude variations to decimal degrees
North and East.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Now that you know what the mapping is between your raw data and the
Darwin Core standard, it’s time to start cleaning up the data to align
with the conventions described in the standard. The following activities
are the three most common conversions a dataset will undergo to align to
the Darwin Core standard: 1. <a href="#getting-your-dates-in-order">Ensuring dates follow the ISO 8601
standard</a> 2. <a href="#matching-your-scientific-names-to-worms">Matching scientific
names to an authoritative resource</a> 3. <a href="#getting-latlon-to-decimal-degrees">Ensuring latitude and
longitude values are in decimal degrees</a></p>
<p>Below is a short summary of each of those conversions as well as some
example conversion scripts. The exercises are intended to give you a
sense of the variability we’ve seen in datasets and how we went about
converting them. While the examples use the <a href="https://pandas.pydata.org/" class="external-link">pandas package for Python</a> and the
<a href="https://www.tidyverse.org/" class="external-link">tidyverse collection of packages
for R</a> (in particular the <a href="https://cloud.r-project.org/web/packages/lubridate/lubridate.pdf" class="external-link">lubridate</a>
package), those are not the only options for dealing with these
conversions but simply the ones we use more frequently in our
experiences.</p>
<section><h2 class="section-heading" id="getting-your-dates-in-order">Getting your dates in order<a class="anchor" aria-label="anchor" href="#getting-your-dates-in-order"></a>
</h2>
<hr class="half-width">
<p>Dates can be surprisingly tricky because people record them in many
different ways. For our purposes we must follow <a href="https://en.wikipedia.org/wiki/ISO_8601" class="external-link">ISO 8601</a> which means
using a four digit year, two digit month, and two digit day with dashes
as separators (i.e. <code>YYYY-MM-DD</code>). You can also record time
in ISO 8601 but make sure to include the time zone which can also get
tricky if your data take place across time zones and throughout the year
where daylight savings time may or may not be in effect (and start and
end times of daylight savings vary across years). There are packages in
R and Python that can help you with these vagaries. Finally, it is
possible to record time intervals in ISO 8601 using a slash
(e.g. <code>2022-01-02/2022-01-12</code>). Examine the dates in your
data to determine what format they are following and what amendments
need to be made to ensure they are following ISO 8601. Below are some
examples and solutions in Python and R for them.</p>
<p>ISO 8601 dates can represent moments in time at different
resolutions, as well as time intervals, which use “/” as a separator.
Date and time are separated by “T”. Timestamps can have a time zone
indicator at the end. If not, then they are assumed to be local time.
When a time is UTC, the letter “Z” is added at the end
(e.g. 2009-02-20T08:40Z, which is the equivalent of
2009-02-20T08:40+00:00).</p>
<div id="tip" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip" class="callout-inner">
<h3 class="callout-title">
<span class="emoji" data-emoji="pushpin">📌</span> Tip</h3>
<div class="callout-content">
<p>Focus on getting your package of choice to read the dates
appropriately. While you can use <a href="https://en.wikipedia.org/wiki/Regular_expression" class="external-link">regular
expressions</a> to replace and substitute strings to align with the ISO
convention, it will typically save you time if you work in your package
of choice to translate the dates.</p>
</div>
</div>
</div>
<table class="table">
<colgroup>
<col width="42%">
<col width="30%">
<col width="26%">
</colgroup>
<thead><tr class="header">
<th>Darwin Core Term</th>
<th>Description</th>
<th>Example</th>
</tr></thead>
<tbody><tr class="odd">
<td><a href="https://dwc.tdwg.org/list/#dwc_eventDate" class="external-link">eventDate</a></td>
<td>The date-time or interval during which an Event occurred. For
occurrences, this is the date-time when the event was recorded. Not
suitable for a time in a geological context.</td>
<td>
<code>1963-03-08T14:07-0600</code> (8 Mar 1963 at 2:07pm in the time
zone six hours earlier than UTC).<br><code>2009-02-20T08:40Z</code> (20
February 2009 8:40am UTC).<br><code>2018-08-29T15:19</code> (3:19pm
local time on 29 August 2018).<br><code>1809-02-12</code> (some time
during 12 February 1809).<br><code>1906-06</code> (some time in June
1906).<br><code>1971</code> (some time in the year
1971).<br><code>2007-03-01T13:00:00Z/2008-05-11T15:30:00Z</code> (some
time during the interval between 1 March 2007 1pm UTC and 11 May 2008
3:30pm UTC).<br><code>1900/1909</code> (some time during the interval
between the beginning of the year 1900 and the end of the year
1909).<br><code>2007-11-13/15</code> (some time in the interval between
13 November 2007 and 15 November 2007).</td>
</tr></tbody>
</table>
<div id="examples" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="examples" class="callout-inner">
<h3 class="callout-title">Examples</h3>
<div class="callout-content">
<p>Below are a few examples in R and Python for converting commonly
represented dates to ISO-8601.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="tabs">
<nav><div id="nav-tab-1" class="nav nav-tabs" role="tablist">
<button class="nav-link active" id="nav-tab-1-1" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-1-1" type="button" role="tab" aria-controls="nav-tabpanel-1-1" aria-selected="true">
  <h3 class="tab-header" id="nav-tab-heading-1-1">
  Python
  </h3>
</button>
<button class="nav-link" id="nav-tab-1-2" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-1-2" type="button" role="tab" aria-controls="nav-tabpanel-1-2" aria-selected="false">
  <h3 class="tab-header" id="nav-tab-heading-1-2">
  R
  </h3>
</button>
</div>
</nav><div id="nav-tabContent-1" class="tab-content">
<div id="nav-tabpanel-1-1" class="tab-pane show active" aria-labelledby="nav-tab-1-1" role="tabpanel">
<p>When dealing with dates using pandas in Python it is best to create a
Series as your time column with the appropriate datatype. Then, when
writing your file(s) using <a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.to_csv.html" class="external-link">.to_csv()</a>
you can specify the format which your date will be written in using the
<code>date_format</code> parameter.</p>
<p>The examples below show how to use the <a href="https://pandas.pydata.org/docs/reference/api/pandas.to_datetime.html" class="external-link">pandas.to_datetime()</a>
function to read various date formats. The process can be applied to
entire columns (or Series) within a DataFrame.</p>
<p><code>01/31/2021 17:00 GMT</code></p>
<p>This date follows a typical date construct of
<code>month</code><strong>/</strong><code>day</code><strong>/</strong><code>year</code>
<code>24-hour</code><strong>:</strong><code>minute</code>
<code>time-zone</code>. The pandas <code>.to_datetime()</code> function
will correctly interpret these dates without the <code>format</code>
parameter.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'date'</span>:[<span class="st">'01/31/2021 17:00 GMT'</span>]})</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>df[<span class="st">'eventDate'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'date'</span>], <span class="bu">format</span><span class="op">=</span><span class="st">"%m/</span><span class="sc">%d</span><span class="st">/%Y %H:%M %Z"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>df</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>                    date                 eventDate
    01/31/2021 17:00 GMT 2021-01-31 17:00:00+00:00</code></pre>
</div>
<p><code>31/01/2021 12:00 EST</code></p>
<p>This date is similar to the first date but switches the
<code>month</code> and <code>day</code> and identifies a different
<code>time-zone</code>. The construct looks like
<code>day</code><strong>/</strong><code>month</code><strong>/</strong><code>year</code>
<code>24-hour</code><strong>:</strong><code>minute</code>
<code>time-zone</code></p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'date'</span>:[<span class="st">'31/01/2021 12:00 EST'</span>]})</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>df[<span class="st">'eventDate'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'date'</span>], <span class="bu">format</span><span class="op">=</span><span class="st">"</span><span class="sc">%d</span><span class="st">/%m/%Y %H:%M %Z"</span>)</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>df</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>                   date                 eventDate
   31/01/2021 12:00 EST 2021-01-31 12:00:00-05:00</code></pre>
</div>
<p><code>January, 01 2021 5:00 PM GMT</code></p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'date'</span>:[<span class="st">'January, 01 2021 5:00 PM GMT'</span>]})</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>df[<span class="st">'eventDate'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'date'</span>],<span class="bu">format</span><span class="op">=</span><span class="st">'%B, </span><span class="sc">%d</span><span class="st"> %Y %I:%M %p %Z'</span>)</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>df</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>                           date                 eventDate
   January, 01 2021 5:00 PM GMT 2021-01-01 17:00:00+00:00</code></pre>
</div>
<p><code>1612112400</code> in seconds since 1970</p>
<p>This uses the units of <code>seconds since 1970</code> which is
common when working with data in <a href="https://www.unidata.ucar.edu/software/netcdf/" class="external-link">netCDF</a>.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'date'</span>:[<span class="st">'1612112400'</span>]})</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>df[<span class="st">'eventDate'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'date'</span>], unit<span class="op">=</span><span class="st">'s'</span>, origin<span class="op">=</span><span class="st">'unix'</span>)</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>df</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>         date           eventDate
   1612112400 2021-01-31 17:00:00</code></pre>
</div>
<p><code>44227.708333333333</code></p>
<p>This is the numerical value for dates in Excel because Excel stores
dates as sequential serial numbers so that they can be used in
calculations. In some cases, when you export an Excel spreadsheet to
CSV, the dates are preserved as a floating point number.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'date'</span>:[<span class="st">'44227.708333333333'</span>]})</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>df[<span class="st">'eventDate'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'date'</span>].astype(<span class="bu">float</span>), unit<span class="op">=</span><span class="st">'D'</span>, origin<span class="op">=</span><span class="st">'1899-12-30'</span>)</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>df</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>                 date                     eventDate
   44227.708333333333 2021-01-31 17:00:00.000000256</code></pre>
</div>
<p>Observations with a start date of <code>2021-01-30</code> and an end
date of <code>2021-01-31</code>.</p>
<p>Here we store the date as a duration following the ISO 8601
convention. In some cases, it is easier to use a regular expression or
simply paste strings together:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'start_date'</span>:[<span class="st">'2021-01-30'</span>],</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>                   <span class="st">'end_date'</span>:[<span class="st">'2021-01-31'</span>]})</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>df[<span class="st">'eventDate'</span>] <span class="op">=</span> df[<span class="st">'start_date'</span>]<span class="op">+</span><span class="st">'/'</span><span class="op">+</span>df[<span class="st">'end_date'</span>]</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>df</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   start_time    end_time              eventDate
   2021-01-30  2021-01-31  2021-01-30/2021-01-31</code></pre>
</div>
<ol style="list-style-type: decimal">
<li>
<p><code>01/31/2021 17:00 GMT</code></p>
<p>This date follows a typical date construct of
<code>month</code><strong>/</strong><code>day</code><strong>/</strong><code>year</code>
<code>24-hour</code><strong>:</strong><code>minute</code>
<code>time-zone</code>. The pandas <code>.to_datetime()</code> function
will correctly interpret these dates without the <code>format</code>
parameter.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'date'</span>:[<span class="st">'01/31/2021 17:00 GMT'</span>]})</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>df[<span class="st">'eventDate'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'date'</span>], <span class="bu">format</span><span class="op">=</span><span class="st">"%m/</span><span class="sc">%d</span><span class="st">/%Y %H:%M %Z"</span>)</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>df</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>                    date                 eventDate
    01/31/2021 17:00 GMT 2021-01-31 17:00:00+00:00</code></pre>
</div>
</li>
<li>
<p><code>31/01/2021 12:00 EST</code></p>
<p>This date is similar to the first date but switches the
<code>month</code> and <code>day</code> and identifies a different
<code>time-zone</code>. The construct looks like
<code>day</code><strong>/</strong><code>month</code><strong>/</strong><code>year</code>
<code>24-hour</code><strong>:</strong><code>minute</code>
<code>time-zone</code></p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'date'</span>:[<span class="st">'31/01/2021 12:00 EST'</span>]})</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>df[<span class="st">'eventDate'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'date'</span>], <span class="bu">format</span><span class="op">=</span><span class="st">"</span><span class="sc">%d</span><span class="st">/%m/%Y %H:%M %Z"</span>)</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>df</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>                   date                 eventDate
   31/01/2021 12:00 EST 2021-01-31 12:00:00-05:00</code></pre>
</div>
</li>
<li>
<p><code>January, 01 2021 5:00 PM GMT</code></p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'date'</span>:[<span class="st">'January, 01 2021 5:00 PM GMT'</span>]})</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>df[<span class="st">'eventDate'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'date'</span>],<span class="bu">format</span><span class="op">=</span><span class="st">'%B, </span><span class="sc">%d</span><span class="st"> %Y %I:%M %p %Z'</span>)</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>df</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>                           date                 eventDate
   January, 01 2021 5:00 PM GMT 2021-01-01 17:00:00+00:00</code></pre>
</div>
</li>
<li>
<p><code>1612112400</code> in seconds since 1970</p>
<p>This uses the units of <code>seconds since 1970</code> which is
common when working with data in <a href="https://www.unidata.ucar.edu/software/netcdf/" class="external-link">netCDF</a>.</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'date'</span>:[<span class="st">'1612112400'</span>]})</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>df[<span class="st">'eventDate'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'date'</span>], unit<span class="op">=</span><span class="st">'s'</span>, origin<span class="op">=</span><span class="st">'unix'</span>)</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>df</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>         date           eventDate
   1612112400 2021-01-31 17:00:00</code></pre>
</div>
</li>
<li>
<p><code>44227.708333333333</code></p>
<p>This is the numerical value for dates in Excel because Excel stores
dates as sequential serial numbers so that they can be used in
calculations. In some cases, when you export an Excel spreadsheet to
CSV, the dates are preserved as a floating point number.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'date'</span>:[<span class="st">'44227.708333333333'</span>]})</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>df[<span class="st">'eventDate'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'date'</span>].astype(<span class="bu">float</span>), unit<span class="op">=</span><span class="st">'D'</span>, origin<span class="op">=</span><span class="st">'1899-12-30'</span>)</span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>df</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>                 date                     eventDate
   44227.708333333333 2021-01-31 17:00:00.000000256</code></pre>
</div>
</li>
<li>
<p>Observations with a start date of <code>2021-01-30</code> and an
end date of <code>2021-01-31</code>.</p>
<p>Here we store the date as a duration following the ISO 8601
convention. In some cases, it is easier to use a regular expression or
simply paste strings together:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'start_date'</span>:[<span class="st">'2021-01-30'</span>],</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>                   <span class="st">'end_date'</span>:[<span class="st">'2021-01-31'</span>]})</span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a>df[<span class="st">'eventDate'</span>] <span class="op">=</span> df[<span class="st">'start_date'</span>]<span class="op">+</span><span class="st">'/'</span><span class="op">+</span>df[<span class="st">'end_date'</span>]</span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a>df</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   start_time    end_time              eventDate
   2021-01-30  2021-01-31  2021-01-30/2021-01-31</code></pre>
</div>
</li>
</ol>
</div>
<div id="nav-tabpanel-1-2" class="tab-pane" aria-labelledby="nav-tab-1-2" role="tabpanel">
<p>When dealing with dates using R, there are a few base functions that
are useful to wrangle your dates in the correct format. An R package
that is useful is <a href="https://cran.r-project.org/web/packages/lubridate/lubridate.pdf" class="external-link">lubridate</a>,
which is part of the <code>tidyverse</code>. It is recommended to
bookmark this <a href="https://evoldyn.gitlab.io/evomics-2018/ref-sheets/R_lubridate.pdf" class="external-link">lubridate
cheatsheet</a>. The examples below show how to use the
<code>lubridate</code> package and format your data to the ISO-8601
standard.</p>
<ol style="list-style-type: decimal">
<li><code>01/31/2021 17:00 GMT</code></li>
</ol>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">lubridate</span><span class="op">)</span></span>
<span><span class="va">date_str</span> <span class="op">&lt;-</span> <span class="st">'01/31/2021 17:00 GMT'</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu">mdy_hm</span><span class="op">(</span><span class="va">date_str</span>,tz<span class="op">=</span><span class="st">"UTC"</span><span class="op">)</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu">format_ISO8601</span><span class="op">(</span><span class="va">date</span><span class="op">)</span> <span class="co"># Separates date and time with a T.</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">paste0</span><span class="op">(</span><span class="va">date</span>, <span class="st">"Z"</span><span class="op">)</span> <span class="co"># Add a Z because time is in UTC.</span></span>
<span><span class="va">date</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "2021-01-31T17:00:00Z"</code></pre>
</div>
<p><code>31/01/2021 12:00 EST</code></p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">lubridate</span><span class="op">)</span></span>
<span><span class="va">date_str</span> <span class="op">&lt;-</span> <span class="st">'31/01/2021 12:00 EST'</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu">dmy_hm</span><span class="op">(</span><span class="va">date_str</span>,tz<span class="op">=</span><span class="st">"EST"</span><span class="op">)</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu">with_tz</span><span class="op">(</span><span class="va">date</span>,tz<span class="op">=</span><span class="st">"UTC"</span><span class="op">)</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu">format_ISO8601</span><span class="op">(</span><span class="va">date</span><span class="op">)</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">paste0</span><span class="op">(</span><span class="va">date</span>, <span class="st">"Z"</span><span class="op">)</span></span>
<span><span class="va">date</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "2021-01-31T17:00:00Z"</code></pre>
</div>
<p><code>January, 01 2021 5:00 PM GMT</code></p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">lubridate</span><span class="op">)</span></span>
<span><span class="va">date_str</span> <span class="op">&lt;-</span> <span class="st">'January, 01 2021 5:00 PM GMT'</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu">mdy_hm</span><span class="op">(</span><span class="va">date_str</span>, tz<span class="op">=</span><span class="st">"GMT"</span><span class="op">)</span></span>
<span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu">with_tz</span><span class="op">(</span><span class="va">date</span>,tz<span class="op">=</span><span class="st">"UTC"</span><span class="op">)</span></span>
<span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu">format_ISO8601</span><span class="op">(</span><span class="va">date</span><span class="op">)</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">paste0</span><span class="op">(</span><span class="va">date</span>, <span class="st">"Z"</span><span class="op">)</span></span>
<span><span class="va">date</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "2021-01-01T17:00:00Z"</code></pre>
</div>
<p><code>1612112400</code> in seconds since 1970</p>
<p>This uses the units of <code>seconds since 1970</code> which is
common when working with data in <a href="https://www.unidata.ucar.edu/software/netcdf/" class="external-link">netCDF</a>.</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">lubridate</span><span class="op">)</span></span>
<span><span class="va">date_str</span> <span class="op">&lt;-</span> <span class="st">'1612112400'</span></span>
<span><span class="va">date_str</span> <span class="op">&lt;-</span> <span class="fu">as.numeric</span><span class="op">(</span><span class="va">date_str</span><span class="op">)</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu">as_datetime</span><span class="op">(</span><span class="va">date_str</span>, origin <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="va">origin</span>, tz <span class="op">=</span> <span class="st">"UTC"</span><span class="op">)</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu">format_ISO8601</span><span class="op">(</span><span class="va">date</span><span class="op">)</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">paste0</span><span class="op">(</span><span class="va">date</span>, <span class="st">"Z"</span><span class="op">)</span></span>
<span><span class="va">date</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "2021-01-31T17:00:00Z"</code></pre>
</div>
<p><code>44227.708333333333</code></p>
<p>This is the numerical value for dates in Excel because Excel stores
dates as sequential serial numbers so that they can be used in
calculations. In some cases, when you export an Excel spreadsheet to
CSV, the dates are preserved as a floating point number.</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">openxlsx</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">lubridate</span><span class="op">)</span></span>
<span><span class="va">date_str</span> <span class="op">&lt;-</span> <span class="fl">44227.708333333333</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">as.Date</span><span class="op">(</span><span class="va">date_str</span>, origin <span class="op">=</span> <span class="st">"1899-12-30"</span><span class="op">)</span> <span class="co"># If you're only interested in the YYYY-MM-DD</span></span>
<span><span class="va">fulldate</span> <span class="op">&lt;-</span> <span class="fu">openxlsx</span><span class="fu">::</span><span class="fu">convertToDateTime</span><span class="op">(</span><span class="va">date_str</span>, tz <span class="op">=</span> <span class="st">"UTC"</span><span class="op">)</span></span>
<span><span class="va">fulldate</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu">format_ISO8601</span><span class="op">(</span><span class="va">fulldate</span><span class="op">)</span></span>
<span><span class="va">fulldate</span> <span class="op">&lt;-</span> <span class="fu">paste0</span><span class="op">(</span><span class="va">fulldate</span>, <span class="st">"Z"</span><span class="op">)</span></span>
<span><span class="fu">print</span><span class="op">(</span><span class="va">date</span><span class="op">)</span></span>
<span><span class="fu">print</span><span class="op">(</span><span class="va">fulldate</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "2021-01-31"
[1] "2021-01-31T17:00:00Z"</code></pre>
</div>
<p>Observations with a start date of <code>2021-01-30</code> and an end
date of <code>2021-01-31</code>. For added complexity, consider adding
in a 4-digit deployment and retrieval time.</p>
<p>Here we store the date as a duration following the ISO 8601
convention. In some cases, it is easier to use a regular expression or
simply paste strings together:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a>event_start <span class="ot">&lt;-</span> <span class="st">'2021-01-30'</span></span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a>event_finish <span class="ot">&lt;-</span> <span class="st">'2021-01-31'</span></span>
<span id="cb35-4"><a href="#cb35-4" tabindex="-1"></a>deployment_time <span class="ot">&lt;-</span> <span class="dv">1002</span></span>
<span id="cb35-5"><a href="#cb35-5" tabindex="-1"></a>retrieval_time <span class="ot">&lt;-</span> <span class="dv">1102</span></span>
<span id="cb35-6"><a href="#cb35-6" tabindex="-1"></a><span class="co"># Time is recorded numerically (1037 instead of 10:37), so need to change these columns:</span></span>
<span id="cb35-7"><a href="#cb35-7" tabindex="-1"></a>deployment_time <span class="ot">&lt;-</span> <span class="fu">substr</span>(<span class="fu">as.POSIXct</span>(<span class="fu">sprintf</span>(<span class="st">"%04.0f"</span>, deployment_time), <span class="at">format =</span> <span class="st">"%H%M"</span>), <span class="dv">12</span>, <span class="dv">16</span>)</span>
<span id="cb35-8"><a href="#cb35-8" tabindex="-1"></a>retrieval_time <span class="ot">&lt;-</span> <span class="fu">substr</span>(<span class="fu">as.POSIXct</span>(<span class="fu">sprintf</span>(<span class="st">"%04.0f"</span>, retrieval_time, <span class="at">format =</span> <span class="st">"%H%M"</span>), <span class="dv">12</span>, <span class="dv">16</span>)</span>
<span id="cb35-9"><a href="#cb35-9" tabindex="-1"></a><span class="co"># If you're interested in just pasting the event dates together:</span></span>
<span id="cb35-10"><a href="#cb35-10" tabindex="-1"></a>eventDate <span class="ot">&lt;-</span> <span class="fu">paste</span>(event_start, event_finish, <span class="at">sep =</span> <span class="st">"/"</span>) </span>
<span id="cb35-11"><a href="#cb35-11" tabindex="-1"></a><span class="co"># If you're interested in including the deployment and retrieval times in the eventDate:</span></span>
<span id="cb35-12"><a href="#cb35-12" tabindex="-1"></a>eventDateTime_start <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">format_ISO8601</span>(<span class="fu">as.POSIXct</span>(<span class="fu">paste</span>(event_start, deployment_time), <span class="at">tz =</span> <span class="st">"UTC"</span>))</span>
<span id="cb35-13"><a href="#cb35-13" tabindex="-1"></a>eventDateTime_start <span class="ot">&lt;-</span> <span class="fu">paste0</span>(eventDateTime_start, <span class="st">"Z"</span>)</span>
<span id="cb35-14"><a href="#cb35-14" tabindex="-1"></a>eventDateTime_finish <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">format_ISO8601</span>(<span class="fu">as.POSIXct</span>(<span class="fu">paste</span>(event_finish, retrieval_time), <span class="at">tz =</span> <span class="st">"UTC"</span>))</span>
<span id="cb35-15"><a href="#cb35-15" tabindex="-1"></a>eventDateTime_finish <span class="ot">&lt;-</span> <span class="fu">paste0</span>(eventDateTime_finish, <span class="st">"Z"</span>)</span>
<span id="cb35-16"><a href="#cb35-16" tabindex="-1"></a>eventDateTime <span class="ot">&lt;-</span> <span class="fu">paste</span>(eventDateTime_start, eventDateTime_finish, <span class="at">sep =</span> <span class="st">"/"</span>) </span>
<span id="cb35-17"><a href="#cb35-17" tabindex="-1"></a><span class="fu">print</span>(eventDate)</span>
<span id="cb35-18"><a href="#cb35-18" tabindex="-1"></a><span class="fu">print</span>(eventDateTime)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "2021-01-30/2021-01-31"
[1] "2021-01-30T10:02:00Z/2021-01-31T11:02:00Z"</code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li>
<p><code>31/01/2021 12:00 EST</code></p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">lubridate</span><span class="op">)</span></span>
<span><span class="va">date_str</span> <span class="op">&lt;-</span> <span class="st">'31/01/2021 12:00 EST'</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu">dmy_hm</span><span class="op">(</span><span class="va">date_str</span>,tz<span class="op">=</span><span class="st">"EST"</span><span class="op">)</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu">with_tz</span><span class="op">(</span><span class="va">date</span>,tz<span class="op">=</span><span class="st">"UTC"</span><span class="op">)</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu">format_ISO8601</span><span class="op">(</span><span class="va">date</span><span class="op">)</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">paste0</span><span class="op">(</span><span class="va">date</span>, <span class="st">"Z"</span><span class="op">)</span></span>
<span><span class="va">date</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "2021-01-31T17:00:00Z"</code></pre>
</div>
</li>
<li>
<p><code>January, 01 2021 5:00 PM GMT</code></p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">lubridate</span><span class="op">)</span></span>
<span><span class="va">date_str</span> <span class="op">&lt;-</span> <span class="st">'January, 01 2021 5:00 PM GMT'</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu">mdy_hm</span><span class="op">(</span><span class="va">date_str</span>, tz<span class="op">=</span><span class="st">"GMT"</span><span class="op">)</span></span>
<span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu">with_tz</span><span class="op">(</span><span class="va">date</span>,tz<span class="op">=</span><span class="st">"UTC"</span><span class="op">)</span></span>
<span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu">format_ISO8601</span><span class="op">(</span><span class="va">date</span><span class="op">)</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">paste0</span><span class="op">(</span><span class="va">date</span>, <span class="st">"Z"</span><span class="op">)</span></span>
<span><span class="va">date</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "2021-01-01T17:00:00Z"</code></pre>
</div>
</li>
<li>
<p><code>1612112400</code> in seconds since 1970</p>
<p>This uses the units of <code>seconds since 1970</code> which is
common when working with data in <a href="https://www.unidata.ucar.edu/software/netcdf/" class="external-link">netCDF</a>.</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">lubridate</span><span class="op">)</span></span>
<span><span class="va">date_str</span> <span class="op">&lt;-</span> <span class="st">'1612112400'</span></span>
<span><span class="va">date_str</span> <span class="op">&lt;-</span> <span class="fu">as.numeric</span><span class="op">(</span><span class="va">date_str</span><span class="op">)</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu">as_datetime</span><span class="op">(</span><span class="va">date_str</span>, origin <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="va">origin</span>, tz <span class="op">=</span> <span class="st">"UTC"</span><span class="op">)</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu">format_ISO8601</span><span class="op">(</span><span class="va">date</span><span class="op">)</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">paste0</span><span class="op">(</span><span class="va">date</span>, <span class="st">"Z"</span><span class="op">)</span></span>
<span><span class="va">date</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "2021-01-31T17:00:00Z"</code></pre>
</div>
</li>
<li>
<p><code>44227.708333333333</code></p>
<p>This is the numerical value for dates in Excel because Excel stores
dates as sequential serial numbers so that they can be used in
calculations. In some cases, when you export an Excel spreadsheet to
CSV, the dates are preserved as a floating point number.</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">openxlsx</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">lubridate</span><span class="op">)</span></span>
<span><span class="va">date_str</span> <span class="op">&lt;-</span> <span class="fl">44227.708333333333</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu">as.Date</span><span class="op">(</span><span class="va">date_str</span>, origin <span class="op">=</span> <span class="st">"1899-12-30"</span><span class="op">)</span> <span class="co"># If you're only interested in the YYYY-MM-DD</span></span>
<span><span class="va">fulldate</span> <span class="op">&lt;-</span> <span class="fu">openxlsx</span><span class="fu">::</span><span class="fu">convertToDateTime</span><span class="op">(</span><span class="va">date_str</span>, tz <span class="op">=</span> <span class="st">"UTC"</span><span class="op">)</span></span>
<span><span class="va">fulldate</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu">format_ISO8601</span><span class="op">(</span><span class="va">fulldate</span><span class="op">)</span></span>
<span><span class="va">fulldate</span> <span class="op">&lt;-</span> <span class="fu">paste0</span><span class="op">(</span><span class="va">fulldate</span>, <span class="st">"Z"</span><span class="op">)</span></span>
<span><span class="fu">print</span><span class="op">(</span><span class="va">date</span><span class="op">)</span></span>
<span><span class="fu">print</span><span class="op">(</span><span class="va">fulldate</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "2021-01-31"
[1] "2021-01-31T17:00:00Z"</code></pre>
</div>
</li>
<li>
<p>Observations with a start date of <code>2021-01-30</code> and an
end date of <code>2021-01-31</code>. For added complexity, consider
adding in a 4-digit deployment and retrieval time.</p>
<p>Here we store the date as a duration following the ISO 8601
convention. In some cases, it is easier to use a regular expression or
simply paste strings together:</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb45-2"><a href="#cb45-2" tabindex="-1"></a>event_start <span class="ot">&lt;-</span> <span class="st">'2021-01-30'</span></span>
<span id="cb45-3"><a href="#cb45-3" tabindex="-1"></a>event_finish <span class="ot">&lt;-</span> <span class="st">'2021-01-31'</span></span>
<span id="cb45-4"><a href="#cb45-4" tabindex="-1"></a>deployment_time <span class="ot">&lt;-</span> <span class="dv">1002</span></span>
<span id="cb45-5"><a href="#cb45-5" tabindex="-1"></a>retrieval_time <span class="ot">&lt;-</span> <span class="dv">1102</span></span>
<span id="cb45-6"><a href="#cb45-6" tabindex="-1"></a><span class="co"># Time is recorded numerically (1037 instead of 10:37), so need to change these columns:</span></span>
<span id="cb45-7"><a href="#cb45-7" tabindex="-1"></a>deployment_time <span class="ot">&lt;-</span> <span class="fu">substr</span>(<span class="fu">as.POSIXct</span>(<span class="fu">sprintf</span>(<span class="st">"%04.0f"</span>, deployment_time), <span class="at">format =</span> <span class="st">"%H%M"</span>), <span class="dv">12</span>, <span class="dv">16</span>)</span>
<span id="cb45-8"><a href="#cb45-8" tabindex="-1"></a>retrieval_time <span class="ot">&lt;-</span> <span class="fu">substr</span>(<span class="fu">as.POSIXct</span>(<span class="fu">sprintf</span>(<span class="st">"%04.0f"</span>, retrieval_time, <span class="at">format =</span> <span class="st">"%H%M"</span>), <span class="dv">12</span>, <span class="dv">16</span>)</span>
<span id="cb45-9"><a href="#cb45-9" tabindex="-1"></a><span class="co"># If you're interested in just pasting the event dates together:</span></span>
<span id="cb45-10"><a href="#cb45-10" tabindex="-1"></a>eventDate <span class="ot">&lt;-</span> <span class="fu">paste</span>(event_start, event_finish, <span class="at">sep =</span> <span class="st">"/"</span>) </span>
<span id="cb45-11"><a href="#cb45-11" tabindex="-1"></a><span class="co"># If you're interested in including the deployment and retrieval times in the eventDate:</span></span>
<span id="cb45-12"><a href="#cb45-12" tabindex="-1"></a>eventDateTime_start <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">format_ISO8601</span>(<span class="fu">as.POSIXct</span>(<span class="fu">paste</span>(event_start, deployment_time), <span class="at">tz =</span> <span class="st">"UTC"</span>))</span>
<span id="cb45-13"><a href="#cb45-13" tabindex="-1"></a>eventDateTime_start <span class="ot">&lt;-</span> <span class="fu">paste0</span>(eventDateTime_start, <span class="st">"Z"</span>)</span>
<span id="cb45-14"><a href="#cb45-14" tabindex="-1"></a>eventDateTime_finish <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">format_ISO8601</span>(<span class="fu">as.POSIXct</span>(<span class="fu">paste</span>(event_finish, retrieval_time), <span class="at">tz =</span> <span class="st">"UTC"</span>))</span>
<span id="cb45-15"><a href="#cb45-15" tabindex="-1"></a>eventDateTime_finish <span class="ot">&lt;-</span> <span class="fu">paste0</span>(eventDateTime_finish, <span class="st">"Z"</span>)</span>
<span id="cb45-16"><a href="#cb45-16" tabindex="-1"></a>eventDateTime <span class="ot">&lt;-</span> <span class="fu">paste</span>(eventDateTime_start, eventDateTime_finish, <span class="at">sep =</span> <span class="st">"/"</span>) </span>
<span id="cb45-17"><a href="#cb45-17" tabindex="-1"></a><span class="fu">print</span>(eventDate)</span>
<span id="cb45-18"><a href="#cb45-18" tabindex="-1"></a><span class="fu">print</span>(eventDateTime)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "2021-01-30/2021-01-31"
[1] "2021-01-30T10:02:00Z/2021-01-31T11:02:00Z"</code></pre>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="tip-1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-1" class="callout-inner">
<h3 class="callout-title">
<span class="emoji" data-emoji="pushpin">📌</span> Tip</h3>
<div class="callout-content">
<p>When all else fails, treat the dates as strings and use
substitutions/regular expressions to manipulate the strings into ISO
8601.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="matching-your-scientific-names-to-worms">Matching your scientific names to WoRMS<a class="anchor" aria-label="anchor" href="#matching-your-scientific-names-to-worms"></a>
</h2>
<hr class="half-width">
<p>OBIS uses the <a href="https://www.marinespecies.org/" class="external-link">World Register
of Marine Species (WoRMS)</a> as the taxonomic backbone for its system.
GBIF uses the <a href="https://www.catalogueoflife.org/" class="external-link">Catalog of
Life</a>. Since WoRMS contributes to the Catalog of Life and WoRMS is a
requirement for OBIS we will teach you how to do your taxonomic lookups
using WoRMS. The key Darwin Core terms that we need from WoRMS are
<code>scientificNameID</code> also known as the WoRMS LSID which looks
something like this
<code>"urn:lsid:marinespecies.org:taxname:105838"</code> and
<code>kingdom</code> but you can grab the other parts of the taxonomic
hierarchy if you want as well as such as <code>taxonRank</code>.</p>
<p>There are two ways to grab the taxonomic information necessary.
First, you can use the <a href="https://www.marinespecies.org/aphia.php?p=match" class="external-link">WoRMS Taxon Match
Tool</a>. The tool accepts lists of scientific names (each unique name
as a separate row in a .txt, .csv, or .xlsx file) up to 1500 names and
provides an interface for selecting the match you want for ambiguous
matches. A brief walk-through using the service is included <a href="#using-the-worms-taxon-match-tool">below</a>. A more detailed
step-by-step guide on using the WoRMS Taxon Match Tool for the <a href="https://marinebon.org/p2p/" class="external-link">MBON Pole to Pole</a> can be found <a href="https://marinebon.github.io/p2p/protocols/WoRMS_quality_check.pdf" class="external-link">here</a>.
Additionally, OBIS has a three-part <a href="https://www.youtube.com/watch?v=jJ8nlMlg-cY" class="external-link">video series</a> on
YouTube about using the tool.</p>
<p>The other way to get the taxonomic information you need is to use <a href="https://cran.r-project.org/web/packages/worrms/worrms.pdf" class="external-link">worrms</a>
(yes there are two <strong>r</strong>’s in the package name) or <a href="https://github.com/iobis/pyworms" class="external-link">pyworms</a>.</p>
<table class="table">
<colgroup>
<col width="15%">
<col width="50%">
<col width="33%">
</colgroup>
<thead><tr class="header">
<th>Darwin Core Term</th>
<th>Description</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/list/#dwc_scientificNameID" class="external-link">scientificNameID</a></td>
<td>An identifier for the nomenclatural (not taxonomic) details of a
scientific name.</td>
<td><code>urn:lsid:ipni.org:names:37829-1:1.3</code></td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/list/#dwc_kingdom" class="external-link">kingdom</a></td>
<td>The full scientific name of the kingdom in which the taxon is
classified.</td>
<td>
<code>Animalia</code>, <code>Archaea</code>, <code>Bacteria</code>,
<code>Chromista</code>, <code>Fungi</code>, <code>Plantae</code>,
<code>Protozoa</code>, <code>Viruses</code>
</td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/list/#dwc_taxonRank" class="external-link">taxonRank</a></td>
<td>The taxonomic rank of the most specific name in the
scientificName.</td>
<td>
<code>subspecies</code>, <code>varietas</code>, <code>forma</code>,
<code>species</code>, <code>genus</code>
</td>
</tr>
</tbody>
</table>
<div id="examples-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="examples-1" class="callout-inner">
<h3 class="callout-title">Examples</h3>
<div class="callout-content">
<p>Below are a few example tools that can be used to match scientific
names to WoRMS.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="tabs">
<nav><div id="nav-tab-2" class="nav nav-tabs" role="tablist">
<button class="nav-link active" id="nav-tab-2-1" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-2-1" type="button" role="tab" aria-controls="nav-tabpanel-2-1" aria-selected="true">
  <h3 class="tab-header" id="nav-tab-heading-2-1">
  Taxon Match Tool
  </h3>
</button>
<button class="nav-link" id="nav-tab-2-2" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-2-2" type="button" role="tab" aria-controls="nav-tabpanel-2-2" aria-selected="false">
  <h3 class="tab-header" id="nav-tab-heading-2-2">
  worrms
  </h3>
</button>
<button class="nav-link" id="nav-tab-2-3" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-2-3" type="button" role="tab" aria-controls="nav-tabpanel-2-3" aria-selected="false">
  <h3 class="tab-header" id="nav-tab-heading-2-3">
  pyworms
  </h3>
</button>
</div>
</nav><div id="nav-tabContent-2" class="tab-content">
<div id="nav-tabpanel-2-1" class="tab-pane show active" aria-labelledby="nav-tab-2-1" role="tabpanel">
<p>Create a CSV (comma separated value) file with the scientific name of
the species of interest. Here we are showing some of the contents of the
file <a href="../data/species.csv"><code>species.csv</code></a>.</p>
<figure><img src="../fig/species_file_screenshot.png" alt="screenshot" class="figure mx-auto d-block"><div class="figcaption">screenshot</div>
</figure><p>Upload that file to the <a href="https://www.marinespecies.org/aphia.php?p=match" class="external-link">WoRMS Taxon match
service</a></p>
<ul>
<li><strong>make sure the option LSID is checked</strong></li>
<li>
<strong>for the example file, make sure you select LineFeed as the
row delimiter and Tab as the column delimiter</strong> <img src="../fig/WoRMS_upload.png" alt="screenshot" class="figure">
</li>
</ul>
<p>Identify which columns to match to which WoRMS term. <img src="../fig/WoRMS_TaxonMatch_Preview.PNG" alt="screenshot" class="figure"></p>
<p>Click <code>Match</code></p>
<p>Hopefully, a WoRMS exact match will return</p>
<ol style="list-style-type: decimal">
<li>In some cases you will have ambiguous matches. Resolve these rows by
using the pull down menu to select the appropriate match.</li>
<li>Non-matched taxa will appear in red. You will have to go back to
your source file and determine what the appropriate text should
be.<br><img src="../fig/WoRMS_TaxonMatch_MatchOutput.PNG" alt="screenshot" class="figure">
</li>
</ol>
<p>Download the response as an XLS, XLSX, or text file and use the
information when building the Darwin Core file(s). The response from the
example linked above can be found <a href="../data/species_matched.xlsx">here</a>. A screenshot of the file can
be seen below: <img src="../fig/matched_species_screenshot.png" alt="screenshot" class="figure"></p>
<ol style="list-style-type: decimal">
<li>
<p>Create a CSV (comma separated value) file with the scientific
name of the species of interest. Here we are showing some of the
contents of the file <a href="../data/species.csv"><code>species.csv</code></a>.</p>
<figure><img src="../fig/species_file_screenshot.png" alt="screenshot" class="figure mx-auto d-block"><div class="figcaption">screenshot</div>
</figure>
</li>
<li>
<p>Upload that file to the <a href="https://www.marinespecies.org/aphia.php?p=match" class="external-link">WoRMS Taxon match
service</a></p>
<ul>
<li><strong>make sure the option LSID is checked</strong></li>
<li>
<strong>for the example file, make sure you select LineFeed as the
row delimiter and Tab as the column delimiter</strong> <img src="../fig/WoRMS_upload.png" alt="screenshot" class="figure">
</li>
</ul>
</li>
<li><p>Identify which columns to match to which WoRMS term. <img src="../fig/WoRMS_TaxonMatch_Preview.PNG" alt="screenshot" class="figure"></p></li>
<li><p>Click <code>Match</code></p></li>
<li>
<p>Hopefully, a WoRMS exact match will return</p>
<ol style="list-style-type: decimal">
<li>In some cases you will have ambiguous matches. Resolve these rows by
using the pull down menu to select the appropriate match.</li>
<li>Non-matched taxa will appear in red. You will have to go back to
your source file and determine what the appropriate text should
be.<br><img src="../fig/WoRMS_TaxonMatch_MatchOutput.PNG" alt="screenshot" class="figure">
</li>
</ol>
</li>
<li><p>Download the response as an XLS, XLSX, or text file and use the
information when building the Darwin Core file(s). The response from the
example linked above can be found <a href="../data/species_matched.xlsx">here</a>. A screenshot of the file can
be seen below: <img src="../fig/matched_species_screenshot.png" alt="screenshot" class="figure"></p></li>
</ol>
</div>
<div id="nav-tabpanel-2-2" class="tab-pane" aria-labelledby="nav-tab-2-2" role="tabpanel">
<p><a href="https://www.marinespecies.org/aphia.php?p=taxdetails&amp;id=105838" class="external-link"><em>Carcharodon
carcharias</em></a> (White shark)</p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">worrms</span><span class="op">)</span></span>
<span><span class="va">worms_record</span> <span class="op">&lt;-</span> <span class="fu">worrms</span><span class="fu">::</span><span class="fu">wm_records_taxamatch</span><span class="op">(</span><span class="st">"Carcharodon carcharias"</span>, fuzzy <span class="op">=</span> <span class="cn">TRUE</span>, marine_only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">worms_record</span><span class="op">$</span><span class="va">lsid</span>;  <span class="va">worms_record</span><span class="op">$</span><span class="va">rank</span>; <span class="va">worms_record</span><span class="op">$</span><span class="va">kingdom</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "urn:lsid:marinespecies.org:taxname:105838"
[1] "Species"
[1] "Animalia"</code></pre>
</div>
<ol style="list-style-type: decimal">
<li>
<p><a href="https://www.marinespecies.org/aphia.php?p=taxdetails&amp;id=105838" class="external-link"><em>Carcharodon
carcharias</em></a> (White shark)</p>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">worrms</span><span class="op">)</span></span>
<span><span class="va">worms_record</span> <span class="op">&lt;-</span> <span class="fu">worrms</span><span class="fu">::</span><span class="fu">wm_records_taxamatch</span><span class="op">(</span><span class="st">"Carcharodon carcharias"</span>, fuzzy <span class="op">=</span> <span class="cn">TRUE</span>, marine_only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">worms_record</span><span class="op">$</span><span class="va">lsid</span>;  <span class="va">worms_record</span><span class="op">$</span><span class="va">rank</span>; <span class="va">worms_record</span><span class="op">$</span><span class="va">kingdom</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "urn:lsid:marinespecies.org:taxname:105838"
[1] "Species"
[1] "Animalia"</code></pre>
</div>
</li>
</ol>
</div>
<div id="nav-tabpanel-2-3" class="tab-pane" aria-labelledby="nav-tab-2-3" role="tabpanel">
<p>Bringing in <a href="../data/species.csv"><code>species.csv</code></a>
and collecting appropriate information from WoRMS using the pyworms
package.</p>
<p><strong>Note</strong> some of the responses have multiple matches, so
the user needs to evaluate which match is appropriate.</p>
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb51-2"><a href="#cb51-2" tabindex="-1"></a><span class="im">import</span> pyworms</span>
<span id="cb51-3"><a href="#cb51-3" tabindex="-1"></a><span class="im">import</span> pprint</span>
<span id="cb51-4"><a href="#cb51-4" tabindex="-1"></a></span>
<span id="cb51-5"><a href="#cb51-5" tabindex="-1"></a>fname <span class="op">=</span> <span class="st">'https://ioos.github.io/bio_mobilization_workshop/data/species.csv'</span></span>
<span id="cb51-6"><a href="#cb51-6" tabindex="-1"></a></span>
<span id="cb51-7"><a href="#cb51-7" tabindex="-1"></a><span class="co"># Read in the csv data to data frame</span></span>
<span id="cb51-8"><a href="#cb51-8" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(fname)</span>
<span id="cb51-9"><a href="#cb51-9" tabindex="-1"></a></span>
<span id="cb51-10"><a href="#cb51-10" tabindex="-1"></a><span class="co"># Iterate row by row through the data frame and query worms for each ScientificName term.</span></span>
<span id="cb51-11"><a href="#cb51-11" tabindex="-1"></a><span class="cf">for</span> index, row <span class="kw">in</span> df.iterrows():</span>
<span id="cb51-12"><a href="#cb51-12" tabindex="-1"></a>   resp <span class="op">=</span> pyworms.aphiaRecordsByMatchNames(row[<span class="st">'ORIGINAL_NAME'</span>], marine_only<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb51-13"><a href="#cb51-13" tabindex="-1"></a></span>
<span id="cb51-14"><a href="#cb51-14" tabindex="-1"></a>   <span class="co"># When no matches are found, print the non-matching name and move on</span></span>
<span id="cb51-15"><a href="#cb51-15" tabindex="-1"></a>   <span class="cf">if</span> <span class="bu">len</span>(resp[<span class="dv">0</span>]) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb51-16"><a href="#cb51-16" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">'</span><span class="ch">\n</span><span class="st">No match for name "</span><span class="sc">{}</span><span class="st">"'</span>.<span class="bu">format</span>(row[<span class="st">'ORIGINAL_NAME'</span>]))</span>
<span id="cb51-17"><a href="#cb51-17" tabindex="-1"></a>      <span class="cf">continue</span></span>
<span id="cb51-18"><a href="#cb51-18" tabindex="-1"></a></span>
<span id="cb51-19"><a href="#cb51-19" tabindex="-1"></a>   <span class="co"># When more than 1 match is found, the user needs to take a look. But tell the user which one has multiple matches</span></span>
<span id="cb51-20"><a href="#cb51-20" tabindex="-1"></a>   <span class="cf">elif</span> <span class="bu">len</span>(resp[<span class="dv">0</span>]) <span class="op">&gt;</span> <span class="dv">1</span>:</span>
<span id="cb51-21"><a href="#cb51-21" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">'</span><span class="ch">\n</span><span class="st">Multiple matches for name "</span><span class="sc">{}</span><span class="st">":'</span>.<span class="bu">format</span>(row[<span class="st">'ORIGINAL_NAME'</span>]))</span>
<span id="cb51-22"><a href="#cb51-22" tabindex="-1"></a>      pprint.pprint(resp[<span class="dv">0</span>], indent<span class="op">=</span><span class="dv">4</span>)</span>
<span id="cb51-23"><a href="#cb51-23" tabindex="-1"></a>      <span class="cf">continue</span></span>
<span id="cb51-24"><a href="#cb51-24" tabindex="-1"></a></span>
<span id="cb51-25"><a href="#cb51-25" tabindex="-1"></a>   <span class="co"># When only 1 match is found, put the appropriate information into the appropriate row and column</span></span>
<span id="cb51-26"><a href="#cb51-26" tabindex="-1"></a>   <span class="cf">else</span>:</span>
<span id="cb51-27"><a href="#cb51-27" tabindex="-1"></a>      worms <span class="op">=</span> resp[<span class="dv">0</span>][<span class="dv">0</span>]</span>
<span id="cb51-28"><a href="#cb51-28" tabindex="-1"></a>      df.loc[index, <span class="st">'scientificNameID'</span>] <span class="op">=</span> worms[<span class="st">'lsid'</span>]</span>
<span id="cb51-29"><a href="#cb51-29" tabindex="-1"></a>      df.loc[index, <span class="st">'taxonRank'</span>] <span class="op">=</span> worms[<span class="st">'rank'</span>]</span>
<span id="cb51-30"><a href="#cb51-30" tabindex="-1"></a>      df.loc[index, <span class="st">'kingdom'</span>] <span class="op">=</span> worms[<span class="st">'kingdom'</span>]</span>
<span id="cb51-31"><a href="#cb51-31" tabindex="-1"></a></span>
<span id="cb51-32"><a href="#cb51-32" tabindex="-1"></a><span class="co"># print the first 10 rows</span></span>
<span id="cb51-33"><a href="#cb51-33" tabindex="-1"></a>df.head()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>No match for scientific name "Zygophylax  doris (Faxon, 1893)"

Multiple matches for scientific name "Acanthephyra brevirostris Smith, 1885"

                                 ORIGINAL_NAME                           scientificNameID taxonRank   kingdom
0              Zygophylax  doris (Faxon, 1893)                                        NaN       NaN       NaN
1       Bentheogennema intermedia (Bate, 1888)  urn:lsid:marinespecies.org:taxname:107086   Species  Animalia
2  Bentheogennema stephenseni Burkenroad, 1940  urn:lsid:marinespecies.org:taxname:377419   Species  Animalia
3       Bentheogennema pasithea (de Man, 1907)  urn:lsid:marinespecies.org:taxname:377418   Species  Animalia
4        Acanthephyra brevirostris Smith, 1885                                        NaN       NaN       NaN</code></pre>
</div>
<ol style="list-style-type: decimal">
<li>
<p>Bringing in <a href="../data/species.csv"><code>species.csv</code></a> and collecting
appropriate information from WoRMS using the pyworms package.</p>
<p><strong>Note</strong> some of the responses have multiple matches, so
the user needs to evaluate which match is appropriate.</p>
<div class="codewrapper sourceCode" id="cb53">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb53-2"><a href="#cb53-2" tabindex="-1"></a><span class="im">import</span> pyworms</span>
<span id="cb53-3"><a href="#cb53-3" tabindex="-1"></a><span class="im">import</span> pprint</span>
<span id="cb53-4"><a href="#cb53-4" tabindex="-1"></a></span>
<span id="cb53-5"><a href="#cb53-5" tabindex="-1"></a>fname <span class="op">=</span> <span class="st">'https://ioos.github.io/bio_mobilization_workshop/data/species.csv'</span></span>
<span id="cb53-6"><a href="#cb53-6" tabindex="-1"></a></span>
<span id="cb53-7"><a href="#cb53-7" tabindex="-1"></a><span class="co"># Read in the csv data to data frame</span></span>
<span id="cb53-8"><a href="#cb53-8" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(fname)</span>
<span id="cb53-9"><a href="#cb53-9" tabindex="-1"></a></span>
<span id="cb53-10"><a href="#cb53-10" tabindex="-1"></a><span class="co"># Iterate row by row through the data frame and query worms for each ScientificName term.</span></span>
<span id="cb53-11"><a href="#cb53-11" tabindex="-1"></a><span class="cf">for</span> index, row <span class="kw">in</span> df.iterrows():</span>
<span id="cb53-12"><a href="#cb53-12" tabindex="-1"></a>   resp <span class="op">=</span> pyworms.aphiaRecordsByMatchNames(row[<span class="st">'ORIGINAL_NAME'</span>], marine_only<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb53-13"><a href="#cb53-13" tabindex="-1"></a></span>
<span id="cb53-14"><a href="#cb53-14" tabindex="-1"></a>   <span class="co"># When no matches are found, print the non-matching name and move on</span></span>
<span id="cb53-15"><a href="#cb53-15" tabindex="-1"></a>   <span class="cf">if</span> <span class="bu">len</span>(resp[<span class="dv">0</span>]) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb53-16"><a href="#cb53-16" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">'</span><span class="ch">\n</span><span class="st">No match for name "</span><span class="sc">{}</span><span class="st">"'</span>.<span class="bu">format</span>(row[<span class="st">'ORIGINAL_NAME'</span>]))</span>
<span id="cb53-17"><a href="#cb53-17" tabindex="-1"></a>      <span class="cf">continue</span></span>
<span id="cb53-18"><a href="#cb53-18" tabindex="-1"></a></span>
<span id="cb53-19"><a href="#cb53-19" tabindex="-1"></a>   <span class="co"># When more than 1 match is found, the user needs to take a look. But tell the user which one has multiple matches</span></span>
<span id="cb53-20"><a href="#cb53-20" tabindex="-1"></a>   <span class="cf">elif</span> <span class="bu">len</span>(resp[<span class="dv">0</span>]) <span class="op">&gt;</span> <span class="dv">1</span>:</span>
<span id="cb53-21"><a href="#cb53-21" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">'</span><span class="ch">\n</span><span class="st">Multiple matches for name "</span><span class="sc">{}</span><span class="st">":'</span>.<span class="bu">format</span>(row[<span class="st">'ORIGINAL_NAME'</span>]))</span>
<span id="cb53-22"><a href="#cb53-22" tabindex="-1"></a>      pprint.pprint(resp[<span class="dv">0</span>], indent<span class="op">=</span><span class="dv">4</span>)</span>
<span id="cb53-23"><a href="#cb53-23" tabindex="-1"></a>      <span class="cf">continue</span></span>
<span id="cb53-24"><a href="#cb53-24" tabindex="-1"></a></span>
<span id="cb53-25"><a href="#cb53-25" tabindex="-1"></a>   <span class="co"># When only 1 match is found, put the appropriate information into the appropriate row and column</span></span>
<span id="cb53-26"><a href="#cb53-26" tabindex="-1"></a>   <span class="cf">else</span>:</span>
<span id="cb53-27"><a href="#cb53-27" tabindex="-1"></a>      worms <span class="op">=</span> resp[<span class="dv">0</span>][<span class="dv">0</span>]</span>
<span id="cb53-28"><a href="#cb53-28" tabindex="-1"></a>      df.loc[index, <span class="st">'scientificNameID'</span>] <span class="op">=</span> worms[<span class="st">'lsid'</span>]</span>
<span id="cb53-29"><a href="#cb53-29" tabindex="-1"></a>      df.loc[index, <span class="st">'taxonRank'</span>] <span class="op">=</span> worms[<span class="st">'rank'</span>]</span>
<span id="cb53-30"><a href="#cb53-30" tabindex="-1"></a>      df.loc[index, <span class="st">'kingdom'</span>] <span class="op">=</span> worms[<span class="st">'kingdom'</span>]</span>
<span id="cb53-31"><a href="#cb53-31" tabindex="-1"></a></span>
<span id="cb53-32"><a href="#cb53-32" tabindex="-1"></a><span class="co"># print the first 10 rows</span></span>
<span id="cb53-33"><a href="#cb53-33" tabindex="-1"></a>df.head()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>No match for scientific name "Zygophylax  doris (Faxon, 1893)"

Multiple matches for scientific name "Acanthephyra brevirostris Smith, 1885"

                                 ORIGINAL_NAME                           scientificNameID taxonRank   kingdom
0              Zygophylax  doris (Faxon, 1893)                                        NaN       NaN       NaN
1       Bentheogennema intermedia (Bate, 1888)  urn:lsid:marinespecies.org:taxname:107086   Species  Animalia
2  Bentheogennema stephenseni Burkenroad, 1940  urn:lsid:marinespecies.org:taxname:377419   Species  Animalia
3       Bentheogennema pasithea (de Man, 1907)  urn:lsid:marinespecies.org:taxname:377418   Species  Animalia
4        Acanthephyra brevirostris Smith, 1885                                        NaN       NaN       NaN</code></pre>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="getting-latlon-to-decimal-degrees">Getting lat/lon to decimal degrees<a class="anchor" aria-label="anchor" href="#getting-latlon-to-decimal-degrees"></a>
</h2>
<hr class="half-width">
<p>Latitude (<code>decimalLatitude</code>) and longitude
(<code>decimalLongitude</code>) are the geographic coordinates (in
decimal degrees north and east, respectively), using the spatial
reference system given in <code>geodeticDatum</code> of the geographic
center of a location. * <code>decimalLatitude</code>, positive values
are north of the Equator, negative values are south of it. All values
lie between -90 and 90, inclusive. * <code>decimalLongitude</code>,
positive values are east of the Greenwich Meridian, negative values are
west of it. All values lie between -180 and 180, inclusive.</p>
<p>Note, that the requirement for <code>decimalLatitude</code> and
<code>decimallLongitude</code> is they must be in decimal degrees in <a href="https://en.wikipedia.org/wiki/World_Geodetic_System" class="external-link">WGS84</a>.
Since this is the requirement for Darwin Core, <strong>OBIS and GBIF
will assume data shared using those Darwin Core terms are in the
geodetic datum <code>WGS84</code></strong>. We highly recommend checking
the coordinate reference system (CRS) of your observations to confirm
they are using the same datum and documenting it in the
<code>geodeticDatum</code> Darwin Core term. If your coordinates are not
using <code>WGS84</code>, they will need to be converted in order to
share the data to OBIS and GBIF since <code>decimalLatitude</code> and
<code>decimalLongitude</code> are required terms.</p>
<p>Helpful packages for managing CRS and geodetic datum: * python: <a href="https://geopandas.org/en/stable/getting_started.html" class="external-link">GeoPandas</a>
has a <a href="https://geopandas.org/en/stable/docs/user_guide/projections.html#re-projecting" class="external-link">utility</a>.
* R: <a href="https://cran.r-project.org/web/packages/terra/index.html" class="external-link">terra</a>
and <a href="https://cran.r-project.org/web/packages/sf/index.html" class="external-link">sf</a>.</p>
<div id="callout3" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>If at all possible, it’s best to extract out the components of the
information you have in order to compile the appropriate field. For
example, if you have the coordinates as one lone string
<code>17° 51' 57.96" S 149° 39' 13.32" W</code>, try to split it out
into its component pieces: <code>17</code>, <code>51</code>,
<code>57.96</code>, <code>S</code>, <code>149</code>, <code>39</code>,
<code>13.32</code>, and <code>W</code> just be sure to track which
values are latitude and which are longitude.</p>
</div>
</div>
</div>
<table class="table">
<colgroup>
<col width="38%">
<col width="27%">
<col width="34%">
</colgroup>
<thead><tr class="header">
<th>Darwin Core Term</th>
<th>Description</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/list/#dwc_decimalLatitude" class="external-link">decimalLatitude</a></td>
<td>The geographic latitude (in decimal degrees, using the spatial
reference system given in geodeticDatum) of the geographic center of a
Location. Positive values are north of the Equator, negative values are
south of it. Legal values lie between -90 and 90, inclusive.</td>
<td><code>-41.0983423</code></td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/list/#dwc_decimalLongitude" class="external-link">decimalLongitude</a></td>
<td>The geographic longitude (in decimal degrees, using the spatial
reference system given in geodeticDatum) of the geographic center of a
Location. Positive values are east of the Greenwich Meridian, negative
values are west of it. Legal values lie between -180 and 180,
inclusive.</td>
<td><code>-121.1761111</code></td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/list/#dwc_geodeticDatum" class="external-link">geodeticDatum</a></td>
<td>The ellipsoid, geodetic datum, or spatial reference system (SRS)
upon which the geographic coordinates given in decimalLatitude and
decimalLongitude as based.</td>
<td><code>WGS84</code></td>
</tr>
</tbody>
</table>
<figure><img src="https://imgs.xkcd.com/comics/coordinate_precision.png" alt="coordinate_precision" class="figure mx-auto d-block"><div class="figcaption">coordinate_precision</div>
</figure><p><em>Image credit: <a href="https://xkcd.com/" class="external-link">xkcd</a></em></p>
<div id="examples-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="examples-2" class="callout-inner">
<h3 class="callout-title">Examples</h3>
<div class="callout-content">
<p>Below are a few examples in R and Python to convert some common
coordinate pairs.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<div class="tabs">
<nav><div id="nav-tab-3" class="nav nav-tabs" role="tablist">
<button class="nav-link active" id="nav-tab-3-1" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-3-1" type="button" role="tab" aria-controls="nav-tabpanel-3-1" aria-selected="true">
  <h3 class="tab-header" id="nav-tab-heading-3-1">
  Python
  </h3>
</button>
<button class="nav-link" id="nav-tab-3-2" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-3-2" type="button" role="tab" aria-controls="nav-tabpanel-3-2" aria-selected="false">
  <h3 class="tab-header" id="nav-tab-heading-3-2">
  R
  </h3>
</button>
</div>
</nav><div id="nav-tabContent-3" class="tab-content">
<div id="nav-tabpanel-3-1" class="tab-pane show active" aria-labelledby="nav-tab-3-1" role="tabpanel">
<ul>
<li>This example assumes you have already split the two strings into
discrete components (as shown in the table). An example converting the
full strings <code>17° 51' 57.96" S</code>
<code>149° 39' 13.32" W</code> to decimal degrees can be found <a href="https://github.com/MathewBiddle/misc/blob/07d643da831255069fd1f6e936ca0902e21c0d0c/data302_DON_Oxidation_working_hollibaugh_20190514_process.py#L24-L62" class="external-link">here</a>.</li>
</ul>
<div class="codewrapper sourceCode" id="cb55">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'lat_degrees'</span>:[<span class="dv">17</span>],</span>
<span id="cb55-2"><a href="#cb55-2" tabindex="-1"></a>                   <span class="st">'lat_minutes'</span>:[<span class="dv">51</span>],</span>
<span id="cb55-3"><a href="#cb55-3" tabindex="-1"></a>                   <span class="st">'lat_seconds'</span>:[<span class="fl">57.96</span>],</span>
<span id="cb55-4"><a href="#cb55-4" tabindex="-1"></a>                   <span class="st">'lat_hemisphere'</span>:[<span class="st">'S'</span>],</span>
<span id="cb55-5"><a href="#cb55-5" tabindex="-1"></a>                   <span class="st">'lon_degrees'</span>: [<span class="dv">149</span>], </span>
<span id="cb55-6"><a href="#cb55-6" tabindex="-1"></a>                   <span class="st">'lon_minutes'</span>: [<span class="dv">39</span>], </span>
<span id="cb55-7"><a href="#cb55-7" tabindex="-1"></a>                   <span class="st">'lon_seconds'</span>:[<span class="fl">13.32</span>], </span>
<span id="cb55-8"><a href="#cb55-8" tabindex="-1"></a>                   <span class="st">'lon_hemisphere'</span>: [<span class="st">'W'</span>],</span>
<span id="cb55-9"><a href="#cb55-9" tabindex="-1"></a>                  })</span>
<span id="cb55-10"><a href="#cb55-10" tabindex="-1"></a></span>
<span id="cb55-11"><a href="#cb55-11" tabindex="-1"></a>df[<span class="st">'decimalLatitude'</span>] <span class="op">=</span> df[<span class="st">'lat_degrees'</span>] <span class="op">+</span> ( (df[<span class="st">'lat_minutes'</span>] <span class="op">+</span> (df[<span class="st">'lat_seconds'</span>]<span class="op">/</span><span class="dv">60</span>) )<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb55-12"><a href="#cb55-12" tabindex="-1"></a>df[<span class="st">'decimalLongitude'</span>] <span class="op">=</span> df[<span class="st">'lon_degrees'</span>] <span class="op">+</span> ( (df[<span class="st">'lon_minutes'</span>] <span class="op">+</span> (df[<span class="st">'lon_seconds'</span>]<span class="op">/</span><span class="dv">60</span>) )<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb55-13"><a href="#cb55-13" tabindex="-1"></a></span>
<span id="cb55-14"><a href="#cb55-14" tabindex="-1"></a><span class="co"># Convert hemisphere S and W to negative values as units should be `degrees North` and `degrees East`</span></span>
<span id="cb55-15"><a href="#cb55-15" tabindex="-1"></a>df.loc[df[<span class="st">'lat_hemisphere'</span>]<span class="op">==</span><span class="st">'S'</span>,<span class="st">'decimalLatitude'</span>] <span class="op">=</span> df.loc[df[<span class="st">'lat_hemisphere'</span>]<span class="op">==</span><span class="st">'S'</span>,<span class="st">'decimalLatitude'</span>]<span class="op">*-</span><span class="dv">1</span></span>
<span id="cb55-16"><a href="#cb55-16" tabindex="-1"></a>df.loc[df[<span class="st">'lon_hemisphere'</span>]<span class="op">==</span><span class="st">'W'</span>,<span class="st">'decimalLongitude'</span>] <span class="op">=</span> df.loc[df[<span class="st">'lon_hemisphere'</span>]<span class="op">==</span><span class="st">'W'</span>,<span class="st">'decimalLongitude'</span>]<span class="op">*-</span><span class="dv">1</span></span>
<span id="cb55-17"><a href="#cb55-17" tabindex="-1"></a></span>
<span id="cb55-18"><a href="#cb55-18" tabindex="-1"></a>df[[<span class="st">'decimalLatitude'</span>,<span class="st">'decimalLongitude'</span>]]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   decimalLatitude  decimalLongitude
          -17.8661         -149.6537</code></pre>
</div>
<ul>
<li>Similar to above, this example assumes you have already split the
two strings into discrete components (as shown in the table).</li>
</ul>
<div class="codewrapper sourceCode" id="cb57">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'lat_degrees'</span>:[<span class="dv">33</span>],</span>
<span id="cb57-2"><a href="#cb57-2" tabindex="-1"></a>                   <span class="st">'lat_dec_minutes'</span>:[<span class="fl">22.967</span>],</span>
<span id="cb57-3"><a href="#cb57-3" tabindex="-1"></a>                   <span class="st">'lat_hemisphere'</span>:[<span class="st">'N'</span>],</span>
<span id="cb57-4"><a href="#cb57-4" tabindex="-1"></a>                   <span class="st">'lon_degrees'</span>: [<span class="dv">117</span>], </span>
<span id="cb57-5"><a href="#cb57-5" tabindex="-1"></a>                   <span class="st">'lon_dec_minutes'</span>: [<span class="fl">35.321</span>], </span>
<span id="cb57-6"><a href="#cb57-6" tabindex="-1"></a>                   <span class="st">'lon_hemisphere'</span>: [<span class="st">'W'</span>],</span>
<span id="cb57-7"><a href="#cb57-7" tabindex="-1"></a>                  })</span>
<span id="cb57-8"><a href="#cb57-8" tabindex="-1"></a></span>
<span id="cb57-9"><a href="#cb57-9" tabindex="-1"></a>df[<span class="st">'decimalLatitude'</span>] <span class="op">=</span> df[<span class="st">'lat_degrees'</span>] <span class="op">+</span> (df[<span class="st">'lat_dec_minutes'</span>]<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb57-10"><a href="#cb57-10" tabindex="-1"></a>df[<span class="st">'decimalLongitude'</span>] <span class="op">=</span> df[<span class="st">'lon_degrees'</span>] <span class="op">+</span> (df[<span class="st">'lon_dec_minutes'</span>]<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb57-11"><a href="#cb57-11" tabindex="-1"></a></span>
<span id="cb57-12"><a href="#cb57-12" tabindex="-1"></a><span class="co"># Convert hemisphere S and W to negative values as units should be `degrees North` and `degrees East`</span></span>
<span id="cb57-13"><a href="#cb57-13" tabindex="-1"></a>df.loc[df[<span class="st">'lat_hemisphere'</span>]<span class="op">==</span><span class="st">'S'</span>,<span class="st">'decimalLatitude'</span>] <span class="op">=</span> df.loc[df[<span class="st">'lat_hemisphere'</span>]<span class="op">==</span><span class="st">'S'</span>,<span class="st">'decimalLatitude'</span>]<span class="op">*-</span><span class="dv">1</span></span>
<span id="cb57-14"><a href="#cb57-14" tabindex="-1"></a>df.loc[df[<span class="st">'lon_hemisphere'</span>]<span class="op">==</span><span class="st">'W'</span>,<span class="st">'decimalLongitude'</span>] <span class="op">=</span> df.loc[df[<span class="st">'lon_hemisphere'</span>]<span class="op">==</span><span class="st">'W'</span>,<span class="st">'decimalLongitude'</span>]<span class="op">*-</span><span class="dv">1</span></span>
<span id="cb57-15"><a href="#cb57-15" tabindex="-1"></a></span>
<span id="cb57-16"><a href="#cb57-16" tabindex="-1"></a>df[[<span class="st">'decimalLatitude'</span>,<span class="st">'decimalLongitude'</span>]]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>decimalLatitude  decimalLongitude
0        33.382783       -117.588683</code></pre>
</div>
<ol style="list-style-type: decimal">
<li>
<code>17° 51' 57.96" S</code> <code>149° 39' 13.32" W</code>
<ul>
<li>This example assumes you have already split the two strings into
discrete components (as shown in the table). An example converting the
full strings <code>17° 51' 57.96" S</code>
<code>149° 39' 13.32" W</code> to decimal degrees can be found <a href="https://github.com/MathewBiddle/misc/blob/07d643da831255069fd1f6e936ca0902e21c0d0c/data302_DON_Oxidation_working_hollibaugh_20190514_process.py#L24-L62" class="external-link">here</a>.</li>
</ul>
<table class="table">
<colgroup>
<col width="11%">
<col width="12%">
<col width="12%">
<col width="14%">
<col width="12%">
<col width="12%">
<col width="12%">
<col width="13%">
</colgroup>
<thead><tr class="header">
<th>lat_degrees</th>
<th>lat_minutes</th>
<th>lat_seconds</th>
<th>lat_hemisphere</th>
<th>lon_degrees</th>
<th>lon_minutes</th>
<th>lon_seconds</th>
<th>lon_hemisphere</th>
</tr></thead>
<tbody><tr class="odd">
<td>17</td>
<td>51</td>
<td>57.96</td>
<td>S</td>
<td>149</td>
<td>39</td>
<td>13.32</td>
<td>W</td>
</tr></tbody>
</table>
<div class="codewrapper sourceCode" id="cb59">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'lat_degrees'</span>:[<span class="dv">17</span>],</span>
<span id="cb59-2"><a href="#cb59-2" tabindex="-1"></a>                   <span class="st">'lat_minutes'</span>:[<span class="dv">51</span>],</span>
<span id="cb59-3"><a href="#cb59-3" tabindex="-1"></a>                   <span class="st">'lat_seconds'</span>:[<span class="fl">57.96</span>],</span>
<span id="cb59-4"><a href="#cb59-4" tabindex="-1"></a>                   <span class="st">'lat_hemisphere'</span>:[<span class="st">'S'</span>],</span>
<span id="cb59-5"><a href="#cb59-5" tabindex="-1"></a>                   <span class="st">'lon_degrees'</span>: [<span class="dv">149</span>], </span>
<span id="cb59-6"><a href="#cb59-6" tabindex="-1"></a>                   <span class="st">'lon_minutes'</span>: [<span class="dv">39</span>], </span>
<span id="cb59-7"><a href="#cb59-7" tabindex="-1"></a>                   <span class="st">'lon_seconds'</span>:[<span class="fl">13.32</span>], </span>
<span id="cb59-8"><a href="#cb59-8" tabindex="-1"></a>                   <span class="st">'lon_hemisphere'</span>: [<span class="st">'W'</span>],</span>
<span id="cb59-9"><a href="#cb59-9" tabindex="-1"></a>                  })</span>
<span id="cb59-10"><a href="#cb59-10" tabindex="-1"></a></span>
<span id="cb59-11"><a href="#cb59-11" tabindex="-1"></a>df[<span class="st">'decimalLatitude'</span>] <span class="op">=</span> df[<span class="st">'lat_degrees'</span>] <span class="op">+</span> ( (df[<span class="st">'lat_minutes'</span>] <span class="op">+</span> (df[<span class="st">'lat_seconds'</span>]<span class="op">/</span><span class="dv">60</span>) )<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb59-12"><a href="#cb59-12" tabindex="-1"></a>df[<span class="st">'decimalLongitude'</span>] <span class="op">=</span> df[<span class="st">'lon_degrees'</span>] <span class="op">+</span> ( (df[<span class="st">'lon_minutes'</span>] <span class="op">+</span> (df[<span class="st">'lon_seconds'</span>]<span class="op">/</span><span class="dv">60</span>) )<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb59-13"><a href="#cb59-13" tabindex="-1"></a></span>
<span id="cb59-14"><a href="#cb59-14" tabindex="-1"></a><span class="co"># Convert hemisphere S and W to negative values as units should be `degrees North` and `degrees East`</span></span>
<span id="cb59-15"><a href="#cb59-15" tabindex="-1"></a>df.loc[df[<span class="st">'lat_hemisphere'</span>]<span class="op">==</span><span class="st">'S'</span>,<span class="st">'decimalLatitude'</span>] <span class="op">=</span> df.loc[df[<span class="st">'lat_hemisphere'</span>]<span class="op">==</span><span class="st">'S'</span>,<span class="st">'decimalLatitude'</span>]<span class="op">*-</span><span class="dv">1</span></span>
<span id="cb59-16"><a href="#cb59-16" tabindex="-1"></a>df.loc[df[<span class="st">'lon_hemisphere'</span>]<span class="op">==</span><span class="st">'W'</span>,<span class="st">'decimalLongitude'</span>] <span class="op">=</span> df.loc[df[<span class="st">'lon_hemisphere'</span>]<span class="op">==</span><span class="st">'W'</span>,<span class="st">'decimalLongitude'</span>]<span class="op">*-</span><span class="dv">1</span></span>
<span id="cb59-17"><a href="#cb59-17" tabindex="-1"></a></span>
<span id="cb59-18"><a href="#cb59-18" tabindex="-1"></a>df[[<span class="st">'decimalLatitude'</span>,<span class="st">'decimalLongitude'</span>]]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   decimalLatitude  decimalLongitude
          -17.8661         -149.6537</code></pre>
</div>
</li>
<li>
<code>33° 22.967' N</code> <code>117° 35.321' W</code>
<ul>
<li>Similar to above, this example assumes you have already split the
two strings into discrete components (as shown in the table).</li>
</ul>
<table style="width:100%;" class="table">
<colgroup>
<col width="13%">
<col width="18%">
<col width="17%">
<col width="14%">
<col width="18%">
<col width="16%">
</colgroup>
<thead><tr class="header">
<th>lat_degrees</th>
<th>lat_dec_minutes</th>
<th>lat_hemisphere</th>
<th>lon_degrees</th>
<th>lon_dec_minutes</th>
<th>lon_hemisphere</th>
</tr></thead>
<tbody><tr class="odd">
<td>33</td>
<td>22.967</td>
<td>N</td>
<td>117</td>
<td>35.321</td>
<td>W</td>
</tr></tbody>
</table>
<div class="codewrapper sourceCode" id="cb61">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'lat_degrees'</span>:[<span class="dv">33</span>],</span>
<span id="cb61-2"><a href="#cb61-2" tabindex="-1"></a>                   <span class="st">'lat_dec_minutes'</span>:[<span class="fl">22.967</span>],</span>
<span id="cb61-3"><a href="#cb61-3" tabindex="-1"></a>                   <span class="st">'lat_hemisphere'</span>:[<span class="st">'N'</span>],</span>
<span id="cb61-4"><a href="#cb61-4" tabindex="-1"></a>                   <span class="st">'lon_degrees'</span>: [<span class="dv">117</span>], </span>
<span id="cb61-5"><a href="#cb61-5" tabindex="-1"></a>                   <span class="st">'lon_dec_minutes'</span>: [<span class="fl">35.321</span>], </span>
<span id="cb61-6"><a href="#cb61-6" tabindex="-1"></a>                   <span class="st">'lon_hemisphere'</span>: [<span class="st">'W'</span>],</span>
<span id="cb61-7"><a href="#cb61-7" tabindex="-1"></a>                  })</span>
<span id="cb61-8"><a href="#cb61-8" tabindex="-1"></a></span>
<span id="cb61-9"><a href="#cb61-9" tabindex="-1"></a>df[<span class="st">'decimalLatitude'</span>] <span class="op">=</span> df[<span class="st">'lat_degrees'</span>] <span class="op">+</span> (df[<span class="st">'lat_dec_minutes'</span>]<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb61-10"><a href="#cb61-10" tabindex="-1"></a>df[<span class="st">'decimalLongitude'</span>] <span class="op">=</span> df[<span class="st">'lon_degrees'</span>] <span class="op">+</span> (df[<span class="st">'lon_dec_minutes'</span>]<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb61-11"><a href="#cb61-11" tabindex="-1"></a></span>
<span id="cb61-12"><a href="#cb61-12" tabindex="-1"></a><span class="co"># Convert hemisphere S and W to negative values as units should be `degrees North` and `degrees East`</span></span>
<span id="cb61-13"><a href="#cb61-13" tabindex="-1"></a>df.loc[df[<span class="st">'lat_hemisphere'</span>]<span class="op">==</span><span class="st">'S'</span>,<span class="st">'decimalLatitude'</span>] <span class="op">=</span> df.loc[df[<span class="st">'lat_hemisphere'</span>]<span class="op">==</span><span class="st">'S'</span>,<span class="st">'decimalLatitude'</span>]<span class="op">*-</span><span class="dv">1</span></span>
<span id="cb61-14"><a href="#cb61-14" tabindex="-1"></a>df.loc[df[<span class="st">'lon_hemisphere'</span>]<span class="op">==</span><span class="st">'W'</span>,<span class="st">'decimalLongitude'</span>] <span class="op">=</span> df.loc[df[<span class="st">'lon_hemisphere'</span>]<span class="op">==</span><span class="st">'W'</span>,<span class="st">'decimalLongitude'</span>]<span class="op">*-</span><span class="dv">1</span></span>
<span id="cb61-15"><a href="#cb61-15" tabindex="-1"></a></span>
<span id="cb61-16"><a href="#cb61-16" tabindex="-1"></a>df[[<span class="st">'decimalLatitude'</span>,<span class="st">'decimalLongitude'</span>]]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>decimalLatitude  decimalLongitude
0        33.382783       -117.588683</code></pre>
</div>
</li>
</ol>
</div>
<div id="nav-tabpanel-3-2" class="tab-pane" aria-labelledby="nav-tab-3-2" role="tabpanel">
<p><code>17° 51' 57.96" S</code> <code>149° 39' 13.32" W</code></p>
<div class="codewrapper sourceCode" id="cb63">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tibble</span><span class="op">)</span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span>lat_degrees <span class="op">=</span> <span class="fl">17</span>,</span>
<span>              lat_minutes <span class="op">=</span> <span class="fl">51</span>,</span>
<span>              lat_seconds <span class="op">=</span> <span class="fl">57.96</span>,</span>
<span>              lat_hemisphere <span class="op">=</span> <span class="st">"S"</span>,</span>
<span>              lon_degrees <span class="op">=</span> <span class="fl">149</span>,</span>
<span>              lon_minutes <span class="op">=</span> <span class="fl">39</span>, </span>
<span>              lon_seconds <span class="op">=</span> <span class="fl">13.32</span>, </span>
<span>              lon_hemisphere <span class="op">=</span> <span class="st">"W"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLatitude</span> <span class="op">&lt;-</span> <span class="va">tbl</span><span class="op">$</span><span class="va">lat_degrees</span> <span class="op">+</span> <span class="op">(</span> <span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">lat_minutes</span> <span class="op">+</span> <span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">lat_seconds</span><span class="op">/</span><span class="fl">60</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fl">60</span> <span class="op">)</span></span>
<span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLongitude</span> <span class="op">&lt;-</span> <span class="va">tbl</span><span class="op">$</span><span class="va">lon_degrees</span> <span class="op">+</span> <span class="op">(</span> <span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">lon_minutes</span> <span class="op">+</span> <span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">lon_seconds</span><span class="op">/</span><span class="fl">60</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fl">60</span> <span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLatitude</span> <span class="op">=</span> <span class="fu">as.numeric</span><span class="op">(</span><span class="fu">as.character</span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLatitude</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLongitude</span> <span class="op">=</span> <span class="fu">as.numeric</span><span class="op">(</span><span class="fu">as.character</span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLongitude</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&gt; tbl$decimalLatitude
[1] -17.8661
&gt; tbl$decimalLongitude
[1] -149.6537</code></pre>
</div>
<p><code>33° 22.967' N</code> <code>117° 35.321' W</code></p>
<div class="codewrapper sourceCode" id="cb65">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tibble</span><span class="op">)</span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span>lat_degrees <span class="op">=</span> <span class="fl">33</span>,</span>
<span>              lat_dec_minutes <span class="op">=</span> <span class="fl">22.967</span>,</span>
<span>              lat_hemisphere <span class="op">=</span> <span class="st">"N"</span>,</span>
<span>              lon_degrees <span class="op">=</span> <span class="fl">117</span>, </span>
<span>              lon_dec_minutes <span class="op">=</span> <span class="fl">35.321</span>, </span>
<span>              lon_hemisphere <span class="op">=</span> <span class="st">"W"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLatitude</span> <span class="op">&lt;-</span> <span class="va">tbl</span><span class="op">$</span><span class="va">lat_degrees</span> <span class="op">+</span> <span class="op">(</span> <span class="va">tbl</span><span class="op">$</span><span class="va">lat_dec_minutes</span><span class="op">/</span><span class="fl">60</span> <span class="op">)</span></span>
<span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLongitude</span> <span class="op">&lt;-</span> <span class="va">tbl</span><span class="op">$</span><span class="va">lon_degrees</span> <span class="op">+</span> <span class="op">(</span> <span class="va">tbl</span><span class="op">$</span><span class="va">lon_dec_minutes</span><span class="op">/</span><span class="fl">60</span> <span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLongitude</span> <span class="op">=</span> <span class="fu">as.numeric</span><span class="op">(</span><span class="fu">as.character</span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLongitude</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&gt; tbl$decimalLatitude
[1] 33.38278
&gt; tbl$decimalLongitude
[1] -117.5887</code></pre>
</div>
<p><code>33° 22.967' N</code> <code>117° 35.321' W</code></p>
<ul>
<li>Using the <a href="https://cran.r-project.org/web/packages/measurements/measurements.pdf" class="external-link">measurements
package</a> the <code>conv_unit()</code> can work with space separated
strings for coordinates.</li>
</ul>
<ol style="list-style-type: decimal">
<li>
<p><code>17° 51' 57.96" S</code> <code>149° 39' 13.32" W</code></p>
<table class="table">
<colgroup>
<col width="11%">
<col width="12%">
<col width="12%">
<col width="14%">
<col width="12%">
<col width="12%">
<col width="12%">
<col width="13%">
</colgroup>
<thead><tr class="header">
<th>lat_degrees</th>
<th>lat_minutes</th>
<th>lat_seconds</th>
<th>lat_hemisphere</th>
<th>lon_degrees</th>
<th>lon_minutes</th>
<th>lon_seconds</th>
<th>lon_hemisphere</th>
</tr></thead>
<tbody><tr class="odd">
<td>17</td>
<td>51</td>
<td>57.96</td>
<td>S</td>
<td>149</td>
<td>39</td>
<td>13.32</td>
<td>W</td>
</tr></tbody>
</table>
<div class="codewrapper sourceCode" id="cb67">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tibble</span><span class="op">)</span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span>lat_degrees <span class="op">=</span> <span class="fl">17</span>,</span>
<span>              lat_minutes <span class="op">=</span> <span class="fl">51</span>,</span>
<span>              lat_seconds <span class="op">=</span> <span class="fl">57.96</span>,</span>
<span>              lat_hemisphere <span class="op">=</span> <span class="st">"S"</span>,</span>
<span>              lon_degrees <span class="op">=</span> <span class="fl">149</span>,</span>
<span>              lon_minutes <span class="op">=</span> <span class="fl">39</span>, </span>
<span>              lon_seconds <span class="op">=</span> <span class="fl">13.32</span>, </span>
<span>              lon_hemisphere <span class="op">=</span> <span class="st">"W"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLatitude</span> <span class="op">&lt;-</span> <span class="va">tbl</span><span class="op">$</span><span class="va">lat_degrees</span> <span class="op">+</span> <span class="op">(</span> <span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">lat_minutes</span> <span class="op">+</span> <span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">lat_seconds</span><span class="op">/</span><span class="fl">60</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fl">60</span> <span class="op">)</span></span>
<span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLongitude</span> <span class="op">&lt;-</span> <span class="va">tbl</span><span class="op">$</span><span class="va">lon_degrees</span> <span class="op">+</span> <span class="op">(</span> <span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">lon_minutes</span> <span class="op">+</span> <span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">lon_seconds</span><span class="op">/</span><span class="fl">60</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fl">60</span> <span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLatitude</span> <span class="op">=</span> <span class="fu">as.numeric</span><span class="op">(</span><span class="fu">as.character</span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLatitude</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLongitude</span> <span class="op">=</span> <span class="fu">as.numeric</span><span class="op">(</span><span class="fu">as.character</span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLongitude</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&gt; tbl$decimalLatitude
[1] -17.8661
&gt; tbl$decimalLongitude
[1] -149.6537</code></pre>
</div>
</li>
<li>
<p><code>33° 22.967' N</code> <code>117° 35.321' W</code></p>
<table style="width:100%;" class="table">
<colgroup>
<col width="13%">
<col width="18%">
<col width="17%">
<col width="14%">
<col width="18%">
<col width="16%">
</colgroup>
<thead><tr class="header">
<th>lat_degrees</th>
<th>lat_dec_minutes</th>
<th>lat_hemisphere</th>
<th>lon_degrees</th>
<th>lon_dec_minutes</th>
<th>lon_hemisphere</th>
</tr></thead>
<tbody><tr class="odd">
<td>33</td>
<td>22.967</td>
<td>N</td>
<td>117</td>
<td>35.321</td>
<td>W</td>
</tr></tbody>
</table>
<div class="codewrapper sourceCode" id="cb69">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tibble</span><span class="op">)</span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span>lat_degrees <span class="op">=</span> <span class="fl">33</span>,</span>
<span>              lat_dec_minutes <span class="op">=</span> <span class="fl">22.967</span>,</span>
<span>              lat_hemisphere <span class="op">=</span> <span class="st">"N"</span>,</span>
<span>              lon_degrees <span class="op">=</span> <span class="fl">117</span>, </span>
<span>              lon_dec_minutes <span class="op">=</span> <span class="fl">35.321</span>, </span>
<span>              lon_hemisphere <span class="op">=</span> <span class="st">"W"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLatitude</span> <span class="op">&lt;-</span> <span class="va">tbl</span><span class="op">$</span><span class="va">lat_degrees</span> <span class="op">+</span> <span class="op">(</span> <span class="va">tbl</span><span class="op">$</span><span class="va">lat_dec_minutes</span><span class="op">/</span><span class="fl">60</span> <span class="op">)</span></span>
<span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLongitude</span> <span class="op">&lt;-</span> <span class="va">tbl</span><span class="op">$</span><span class="va">lon_degrees</span> <span class="op">+</span> <span class="op">(</span> <span class="va">tbl</span><span class="op">$</span><span class="va">lon_dec_minutes</span><span class="op">/</span><span class="fl">60</span> <span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLongitude</span> <span class="op">=</span> <span class="fu">as.numeric</span><span class="op">(</span><span class="fu">as.character</span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLongitude</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&gt; tbl$decimalLatitude
[1] 33.38278
&gt; tbl$decimalLongitude
[1] -117.5887</code></pre>
</div>
</li>
<li>
<p><code>33° 22.967' N</code> <code>117° 35.321' W</code></p>
<ul>
<li>Using the <a href="https://cran.r-project.org/web/packages/measurements/measurements.pdf" class="external-link">measurements
package</a> the <code>conv_unit()</code> can work with space separated
strings for coordinates.</li>
</ul>
<table class="table">
<thead><tr class="header">
<th>lat</th>
<th>lat_hemisphere</th>
<th>lon</th>
<th>lon_hemisphere</th>
</tr></thead>
<tbody><tr class="odd">
<td>33 22.967</td>
<td>N</td>
<td>117 35.321</td>
<td>W</td>
</tr></tbody>
</table>
</li>
</ol>
<div class="codewrapper sourceCode" id="cb71">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span>lat <span class="op">=</span> <span class="st">"33 22.967"</span>,</span>
<span>               lat_hemisphere <span class="op">=</span> <span class="st">"N"</span>,</span>
<span>               lon <span class="op">=</span> <span class="st">"117 35.321"</span>, </span>
<span>               lon_hemisphere <span class="op">=</span> <span class="st">"W"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLongitude</span> <span class="op">=</span> <span class="fu">measurements</span><span class="fu">::</span><span class="fu">conv_unit</span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">lon</span>, from <span class="op">=</span> <span class="st">'deg_dec_min'</span>, to <span class="op">=</span> <span class="st">'dec_deg'</span><span class="op">)</span></span>
<span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLongitude</span> <span class="op">=</span> <span class="fu">as.numeric</span><span class="op">(</span><span class="fu">as.character</span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLongitude</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span><span class="op">$</span><span class="va">decimalLatitude</span> <span class="op">=</span> <span class="fu">measurements</span><span class="fu">::</span><span class="fu">conv_unit</span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">lat</span>, from <span class="op">=</span> <span class="st">'deg_dec_min'</span>, to <span class="op">=</span> <span class="st">'dec_deg'</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> &gt; tbl$decimalLatitude
 [1] 33.38278
 &gt; tbl$decimalLongitude
 [1] -117.5887</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>When doing conversions it’s best to break out your data into it’s
component pieces.</li>
<li>Dates are messy to deal with. Some packages have easy solutions,
otherwise use regular expressions to align date strings to ISO
8601.</li>
<li>WoRMS LSIDs are a requirement for OBIS.</li>
<li>Latitude and longitudes are like dates, they can be messy to deal
with. Take a similar approach.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-04-create-schema"><p>Content from <a href="04-create-schema.html">Darwin Core and Extension Schemas</a></p>
<hr>
<p>Last updated on 2025-02-28 |

        <a href="https://github.com/MathewBiddle/test_workshop/edit/main/episodes/04-create-schema.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 90 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is a core and what is an extension in Darwin Core?</li>
<li>What is OBIS-ENV-DATA aka (Event Core with Extended Measurement or
Fact)?</li>
<li>How do I create Darwin Core files?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Creating IDs.</li>
<li>Creating event file, occurrence file, eMOF file.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="darwin-core---cores-and-extensions">Darwin Core - Cores and Extensions<a class="anchor" aria-label="anchor" href="#darwin-core---cores-and-extensions"></a>
</h2>
<hr class="half-width">
<p>Now that we have a firm basis for understanding the different terms
in Darwin Core the next part to understand is how data tables are
organized and the difference between cores and extensions. You will
always have a core table (Occurrence core or Event core) with either no
extensions or several. What you choose depends on the data you have and
how to represent it best. The original Darwin Core core is the <a href="https://rs.gbif.org/core/dwc_occurrence_2022-02-02.xml" class="external-link">Occurrence
core</a>. Once people started using that core they began to see that
they needed extensions to that core to best represent the data they were
trying to share and therefore <a href="https://rs.gbif.org/extensions.html" class="external-link">several extensions</a> have
been developed (and are continuing to be developed). As more monitoring
data has been shared over time, another core type called <a href="https://rs.gbif.org/core/dwc_event_2022-02-02.xml" class="external-link">Event core</a>
was added. Without getting too far into the weeds on the cores and
extensions, what’s most important to understand is that you need to pick
your core type and once you do that then you pick the extensions to go
with it. For example, if your data took place as part of an event
(cruise, transects, etc) you will pick Event core. If there was no
sampling event, then you will pick Occurrence core.</p>
<div class="section level3">
<h3 id="different-options-for-sharing-the-data">Different options for sharing the data<a class="anchor" aria-label="anchor" href="#different-options-for-sharing-the-data"></a>
</h3>
<div class="section level4">
<h4 id="occurrence-only">Occurrence only<a class="anchor" aria-label="anchor" href="#occurrence-only"></a>
</h4>
<p>The bare minimum for sharing data to OBIS is to use the <a href="https://rs.gbif.org/core/dwc_occurrence_2022-02-02.xml" class="external-link">Occurrence
Core</a> with no extensions. This core type covers datasets that only
include observations and/or specimen records where no information on
sampling is available. <strong>Occurrence core is also used for eDNA or
DNA derived data</strong>.</p>
<p>The Occurrence core allows you to provide all the required Darwin
Core terms detailed in the <a href="../01-introduction/index.html">intro
section</a>. You can produce a fully compliant Darwin Core version of
your data using only the Occurrence core (<a href="https://github.com/ioos/bio_data_guide/blob/main/datasets/example_obis_minimum_flair/occurrences.csv" class="external-link">see
this example by Tylar Murray</a>). On one hand, if the data were
collected using some kind of sampling methodology, you will lose much of
that information if you use this most simple form of data structuring.
However, it is faster and easier to produce.</p>
<div id="thought-experiment" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="thought-experiment" class="callout-inner">
<h3 class="callout-title">Thought Experiment</h3>
<div class="callout-content">
<p>Look at the <a href="https://github.com/ioos/bio_data_guide/blob/main/datasets/example_obis_minimum_flair/occurrences.csv" class="external-link">minimum
required fields example</a>. What is possible to do in future reuse?
What would not be possible? For instance, note that there is no
information about depth or the uncertainty of the coordinates.</p>
</div>
</div>
</div>
<p>For more examples check out the <a href="https://github.com/ioos/bio_data_guide/tree/main/datasets" class="external-link">Datasets
folder</a> in the IOOS Bio Data Guide.</p>
</div>
</div>
</section><section><h2 class="section-heading" id="occurrence-core-extensions">Occurrence Core + extensions<a class="anchor" aria-label="anchor" href="#occurrence-core-extensions"></a>
</h2>
<hr class="half-width">
<p>Using the Occurrence core plus <a href="https://rs.gbif.org/extensions.html" class="external-link">relevant extensions</a> means
that you can capture more of the data that’s been recorded. Let’s
consider an environmental DNA dataset. eDNA datasets have information
that is unique to that method and will not be represented well using
Occurrence core only. To document eDNA using Darwin Core you should
follow <a href="https://doi.org/10.35035/doc-vf1a-nr22" class="external-link">this guide</a>;
you will need the Occurrence core plus the <a href="https://rs.gbif.org/extension/gbif/1.0/dna_derived_data_2022-02-23.xml" class="external-link">DNA
derived data extension</a>. Adding the DNA derived data extension allows
you to capture information such as the PCR primer used, DNA sequences,
and other information specific to this type of data.</p>
<p>Let’s consider another example: a museum dataset that has biological
measurements for each individual specimen (e.g.  length). All
information about each organism’s occurrence (taxonomic information,
locality, identification, etc.) will go into the Occurrence core. You
can then capture the biotic measurement information (type of
measurement, units, accuracy, etc.) by using either the <a href="https://rs.gbif.org/extension/dwc/measurements_or_facts_2022-02-02.xml" class="external-link">Measurement
or Facts extension</a>, or the <a href="https://rs.gbif.org/extension/obis/extended_measurement_or_fact.xml" class="external-link">Extended
Measurement or Fact extension</a> (we elaborate on this extension
below). Note again here we do not have information on <em>how</em> the
organisms were sampled.</p>
</section><section><h2 class="section-heading" id="event-core-with-extended-measurement-or-fact-extension">Event Core with Extended Measurement or Fact extension<a class="anchor" aria-label="anchor" href="#event-core-with-extended-measurement-or-fact-extension"></a>
</h2>
<hr class="half-width">
<p>As we have indicated earlier, the Event core is for datasets that
include known sampling events - details are known about how, when, and
where samples were taken.</p>
<p>An innovation that OBIS made was introducing the Extended Measurement
or Fact extension (also sometimes referred to as OBIS-ENV-DATA, or
eMoF). This uses the Event core with an Occurrence extension + the <a href="https://rs.gbif.org/extension/obis/extended_measurement_or_fact.xml" class="external-link">extended
Measurement or Fact extension</a>. The eMoF extension makes it possible
to include measurements for <strong>both</strong> the events (salinity,
temperature, gear type, etc.) and the occurrences (weight, length,
etc.). Prior to this you were only able to include measurements of the
occurrence (in the Measurement or Facts extension).</p>
<p>It is important to know that the structure of the eMoF table is
likely quite a bit different than how the original data are recorded in
your dataset. Rather than documenting each measurement in separate
columns, measurements will be condensed into one column:
<code>measurementValue</code> (e.g. 15). Then, the column
<code>measurementType</code> allows free text describing what the
measurement actually is (e.g. length). Finally the column
<code>measurementUnit</code> is used to indicate the unit of the
measurement (e.g. cm).</p>
<p>The unconstrained nature of <code>measurementType</code> allows for
flexibility in describing measurements, which can be quite a useful. But
what if you wanted to obtain all OBIS records that have “length”
measurements? Due to the inevitable heterogeneity in how different
people document “length”, you would have to try to account for all these
different ways! Fortunately the eMoF table can get around this challenge
by providing a way to include Unique Resource Identifiers (URIs). These
URIs are used to populate the <code>measurementTypeID</code> field, as
well as <code>measurementUnitID</code> and
<code>measurementValueID</code>. URIs mean that if you call the
<code>measurementType</code> “abundance” but I call it “Abundance per
square meter” and we both use the <code>measurementTypeID</code> “<a href="http://vocab.nerc.ac.uk/collection/P01/current/SDBIOL02/" class="external-link uri">http://vocab.nerc.ac.uk/collection/P01/current/SDBIOL02/</a>”
then we know this is the same measurement type even if we didn’t use the
same words to describe it. Choosing the right URI can be difficult but
you can read about finding codes in <a href="https://manual.obis.org/vocabulary.html#map-emof-measurement-identifiers-to-preferred-bodc-vocabulary" class="external-link">the
OBIS Manual</a>. All you need to know for now is that
<code>measurementTypeID</code> should be populated with a URI belonging
to the NERC P01 collection, easily accessible through the <a href="https://vocab.seadatanet.org/p01-facet-search" class="external-link">SeaDataNet P01
facet search</a>, and <code>measurementUnitID</code> should be popualted
with a <a href="https://vocab.nerc.ac.uk/search_nvs/P06/?searchstr=&amp;options=identifier,preflabel,altlabel,status_accepted&amp;rbaddfilter=inc&amp;searchstr2=" class="external-link">NERC
P06 code</a>. OBIS is soon releasing video tutorials to help with
choosing URIs, so stay tuned to their <a href="https://manual.obis.org/" class="external-link">manual</a> and <a href="https://www.youtube.com/@oceanbiodiversityinformati6931/playlists" class="external-link">YouTube
list</a> for updates.</p>
<div id="tip" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip" class="callout-inner">
<h3 class="callout-title">
<span class="emoji" data-emoji="pushpin">📌</span> Tip</h3>
<div class="callout-content">
<p>You can search for <code>measurementTypes</code> that other OBIS data
providers have used by using the <a href="https://mof.obis.org/" class="external-link">OBIS
mof report</a>. BE CAREFUL though to make sure the definition in the URI
matches exactly your measurement type if you want to reuse it for your
data.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="whats-in-an-id">What’s in an ID?<a class="anchor" aria-label="anchor" href="#whats-in-an-id"></a>
</h2>
<hr class="half-width">
<table class="table">
<colgroup>
<col width="42%">
<col width="30%">
<col width="26%">
</colgroup>
<thead><tr class="header">
<th>Darwin Core Term</th>
<th>Description</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:eventID" class="external-link">eventID</a></td>
<td>An identifier for the set of information associated with an Event
(something that occurs at a place and time). May be a global unique
identifier or an identifier specific to the data set.</td>
<td>
<code>INBO:VIS:Ev:00009375</code><br><code>Station_95_Date_09JAN1997:14:35:00.000</code>
<br><code>FFS-216:2007-09-21:A:replicateID1024</code>
</td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/terms/#dwc:occurrenceID" class="external-link">occurrenceID</a></td>
<td>An identifier for the Occurrence (as opposed to a particular digital
record of the occurrence). In the absence of a persistent global unique
identifier, construct one from a combination of identifiers in the
record that will most closely make the occurrenceID globally
unique.</td>
<td>
<code>urn:catalog:UWBM:Bird:89776</code> <br><code>Station_95_Date_09JAN1997:14:35:00.000_Atractosteus_spatula</code>
<br><code>FFS-216:2007-09-21:A:replicateID1024:objectID1345330</code>
</td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:measurementID" class="external-link">measurementID</a></td>
<td>An identifier for the MeasurementOrFact (information pertaining to
measurements, facts, characteristics, or assertions). May be a global
unique identifier or an identifier specific to the data set.</td>
<td><code>9c752d22-b09a-11e8-96f8-529269fb1459</code></td>
</tr>
</tbody>
</table>
<p>IDs are the keys in your data that are used to link tables together.
For example, an <code>occurenceID</code> in the eMoF table records
information about an organism with the same <code>occurrenceID</code>
within the Occurrence core table. IDs are also the keys that keep track
of each of the records, so that if you notice a mistake or missing
information you can keep the record in place in the global aggregators
and fix the mistake or add the missing information. For instance, let’s
say you have a record with an <code>occurrenceID</code>
<code>Station_95_Date_09JAN1997:14:35:00.000_Atractosteus_spatula</code>
and after it’s published to OBIS you notice that the latitude was
recorded incorrectly. When you fix that record in the data you would
keep the <code>occurrenceID</code>
<code>Station_95_Date_09JAN1997:14:35:00.000_Atractosteus_spatula</code>,
fix the latitude, and republish the data so that the record is still
present in OBIS but you have fixed the mistake.</p>
<p>With that in mind what is the best way to create an
<code>eventID</code>, <code>occurrenceID</code>, or
<code>measurementID</code>? Until we have a system that mints Persistent
Identififers for individual records then the best way we have seen is to
build the ID from information in the data itself. That way if you need
to update or fix a record you simply use the same information again to
build the same ID for the same record. Take our example above
<code>Station_95_Date_09JAN1997:14:35:00.000_Atractosteus_spatula</code>.
This is a concatenation of information from the original source data of
the Station number + Verbatim Date + Scientific name. Because this is
unique for each row in the occurrence file and we have kept the original
data in its original format we can always rebuild this ID by
concatenating this same information together again.</p>
<p><strong>It is very important that these IDs do not change over
time</strong>. So if an ID for a museum specimen is built from e.g. the
institution the specimen is being held at, but then the specimen changes
institutions - its ID should <strong>not</strong> change to reflect the
move. If the ID changes then the record will be duplicated in the global
database and record information could be lost over time!</p>
<figure><img src="../fig/OBISsampling-schema-example.png" class="figure mx-auto d-block"></figure><p><em>The Darwin Core file structure, demonstrating how an Event core
table can be connected to extension tables through the use of
identifiers. Image credit: <a href="https://manual.obis.org/" class="external-link">OBIS</a></em></p>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Event Core
  </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler1" aria-labelledby="headingSpoiler1">
<div class="accordion-body">
<table class="table">
<colgroup>
<col width="16%">
<col width="32%">
<col width="35%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th>Darwin Core Term</th>
<th>Definition</th>
<th>Comment</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:eventID" class="external-link"><code>eventID</code></a></td>
<td>An identifier for the set of information associated with an Event
(something that occurs at a place and time). May be a global unique
identifier or an identifier specific to the data set.</td>
<td>To construct a globally unique identifier for each event (tow,
quadrat, station, transect, etc) you can usually concatenate station +
date but you’ll need to check this is unique for each row in your
data.</td>
<td>
<code>INBO:VIS:Ev:00009375</code><br><code>Station_95_Date_09JAN1997:14:35:00.000</code>
<br><code>FFS-216:2007-09-21:A:replicateID1024</code>
</td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/terms/#dwc:eventDate" class="external-link"><code>eventDate</code></a></td>
<td>The date-time or interval during which an Event occurred. For
occurrences, this is the date-time when the event was recorded. Not
suitable for a time in a geological context.</td>
<td>Must follow <a href="https://en.wikipedia.org/wiki/ISO_8601" class="external-link">ISO
8601</a>. See more information on dates in the <a href="../03-data-cleaning/index.html">Data Cleaning</a> section of the
workshop.</td>
<td><code>2009-02-20T08:40Z</code></td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:decimalLatitude" class="external-link"><code>decimalLatitude</code></a></td>
<td>The geographic latitude (in decimal degrees, using the spatial
reference system given in geodeticDatum) of the geographic center of a
Location. Positive values are north of the Equator, negative values are
south of it. Legal values lie between -90 and 90, inclusive.</td>
<td>For OBIS and GBIF the required <code>geodeticDatum</code> is WGS84.
Uncertainty around the geographic center of a Location (e.g. when
sampling event was a transect) can be recorded in
<code>coordinateUncertaintyInMeters</code>. See more information on
coordinates in the <a href="../03-data-cleaning/index.html">Data
Cleaning</a> section of the workshop.</td>
<td><code>-41.0983423</code></td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/terms/#dwc:decimalLongitude" class="external-link"><code>decimalLongitude</code></a></td>
<td>The geographic longitude (in decimal degrees, using the spatial
reference system given in geodeticDatum) of the geographic center of a
Location. Positive values are east of the Greenwich Meridian, negative
values are west of it. Legal values lie between -180 and 180,
inclusive</td>
<td>For OBIS and GBIF the required <code>geodeticDatum</code> is WGS84.
See more information on coordinates in the <a href="../03-data-cleaning/index.html">Data Cleaning</a> section of the
workshop.</td>
<td><code>-121.1761111</code></td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:countryCode" class="external-link"><code>countryCode</code></a></td>
<td>The standard code for the country in which the location occurs.</td>
<td>Use an <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2" class="external-link">ISO
3166-1-alpha-2</a> country code. Not required for OBIS but GBIF needs
this for their system.</td>
<td><code>US</code></td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/terms/#dwciri:geodeticDatum" class="external-link"><code>geodeticDatum</code></a></td>
<td>The ellipsoid, geodetic datum, or spatial reference system (SRS)
upon which the geographic coordinates given in decimalLatitude and
decimalLongitude as based.</td>
<td>Must be <a href="https://epsg.io/4326" class="external-link">WGS84</a> for data shared to
OBIS and GBIF but it’s best to state explicitly that it is.</td>
<td><code>WGS84</code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="accordionSpoiler2" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler2" aria-expanded="false" aria-controls="collapseSpoiler2">
  <h3 class="accordion-header" id="headingSpoiler2">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Occurrence extension
  </h3>
</button>
<div id="collapseSpoiler2" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler2" aria-labelledby="headingSpoiler2">
<div class="accordion-body">
<table class="table">
<colgroup>
<col width="16%">
<col width="32%">
<col width="35%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th>Darwin Core Term</th>
<th>Definition</th>
<th>Comment</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:eventID" class="external-link"><code>eventID</code></a></td>
<td>An identifier for the set of information associated with an Event
(something that occurs at a place and time). May be a global unique
identifier or an identifier specific to the data set.</td>
<td>This will be constructed in the event core but you need to reference
it here in the occurrence extension so the files can link to each other
correctly.</td>
<td>
<code>INBO:VIS:Ev:00009375</code><br><code>Station_95_Date_09JAN1997:14:35:00.000</code>
<br><code>FFS-216:2007-09-21:A:replicateID1024</code>
</td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/terms/#dwc:occurrenceID" class="external-link"><code>occurrenceID</code></a></td>
<td>An identifier for the Occurrence (as opposed to a particular digital
record of the occurrence). In the absence of a persistent global unique
identifier, construct one from a combination of identifiers in the
record that will most closely make the occurrenceID globally
unique.</td>
<td>To construct a globally unique identifier for each occurrence you
can usually concatenate station + date + scientific name (or something
similar) but you’ll need to check this is unique for each row in your
data.</td>
<td><code>Station_95_Date_09JAN1997:14:35:00.000_Atractosteus_spatula</code></td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:basisOfRecord" class="external-link"><code>basisOfRecord</code></a></td>
<td>The specific nature of the data record.</td>
<td>Pick from these controlled vocabulary terms: <a href="http://rs.tdwg.org/dwc/terms/HumanObservation" class="external-link">HumanObservation</a>,
<a href="http://rs.tdwg.org/dwc/terms/MachineObservation" class="external-link">MachineObservation</a>,
<a href="http://rs.tdwg.org/dwc/terms/PreservedSpecimen" class="external-link">PreservedSpecimen</a>,
<a href="http://rs.tdwg.org/dwc/terms/LivingSpecimen" class="external-link">LivingSpecimen</a>,
<a href="http://rs.tdwg.org/dwc/terms/FossilSpecimen" class="external-link">FossilSpecimen</a>,
<a href="http://rs.tdwg.org/dwc/dwctype/MaterialSample" class="external-link">MaterialSample</a>,
<a href="http://rs.tdwg.org/dwc/dwctype/Occurrence" class="external-link">Occurrence</a>, <a href="http://rs.tdwg.org/dwc/dwctype/MaterialCitation" class="external-link">MaterialCitation</a>
</td>
<td><code>HumanObservation</code></td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/terms/#dwc:scientificName" class="external-link"><code>scientificName</code></a></td>
<td>The full scientific name, with authorship and date information if
known. When forming part of an Identification, this should be the name
in lowest level taxonomic rank that can be determined. This term should
not contain identification qualifications, which should instead be
supplied in the <code>identificationQualifier</code> term.</td>
<td>Note that cf., aff., etc. need to be parsed out to the
<code>identificationQualifier</code> term.</td>
<td><code>Atractosteus spatula</code></td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:scientificNameID" class="external-link"><code>scientificNameID</code></a></td>
<td>An identifier for the nomenclatural (not taxonomic) details of a
scientific name.</td>
<td>Must be a WoRMS LSID for sharing to OBIS. Note that the numbers at
the end are the AphiaID from WoRMS.</td>
<td><code>urn:lsid:marinespecies.org:taxname:218214</code></td>
</tr>
<tr class="even">
<td><a href="https://dwc.tdwg.org/terms/#dwc:kingdom" class="external-link"><code>kingdom</code></a></td>
<td>The full scientific name of the kingdom in which the taxon is
classified.</td>
<td>Not required for OBIS but GBIF needs this to disambiguate scientific
names that are the same but in different kingdoms.</td>
<td><code>Animalia</code></td>
</tr>
<tr class="odd">
<td><a href="https://dwc.tdwg.org/terms/#dwc:occurrenceStatus" class="external-link"><code>occurrenceStatus</code></a></td>
<td>A statement about the presence or absence of a Taxon at a
Location.</td>
<td>For OBIS, only valid values are <code>present</code> and
<code>absent</code>.</td>
<td><code>present</code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="accordionSpoiler3" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler3" aria-expanded="false" aria-controls="collapseSpoiler3">
  <h3 class="accordion-header" id="headingSpoiler3">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Extended Measurement or Fact Extension
  </h3>
</button>
<div id="collapseSpoiler3" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler3" aria-labelledby="headingSpoiler3">
<div class="accordion-body">
<p>Nothing is <em>required</em> from the OBIS perspective but if you are
using this extension then <code>eventID</code> is required to be able to
link the extension back to the Event core. You can also use
<code>occurrenceID</code> to link to occurrence records in the
Occurrence core or extension. See <a href="https://rs.gbif.org/extension/obis/extended_measurement_or_fact.xml" class="external-link">here</a>
for all potential fields in the extension and what goes in them. See
below of the most relevant terms to be included in the eMoF table.</p>
<table class="table">
<colgroup>
<col width="16%">
<col width="32%">
<col width="35%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th>Darwin Core Term</th>
<th>Definition</th>
<th>Comment</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>eventID</code></td>
<td>An identifier for the set of information associated with an Event
(something that occurs at a place and time). May be a global unique
identifier or an identifier specific to the data set.</td>
<td>This will be constructed in the Event core but you need to reference
it here in the extension so the files can link to each other
correctly.</td>
<td>
<code>INBO:VIS:Ev:00009375</code><br><code>Station_95_Date_09JAN1997:14:35:00.000</code>
<br><code>FFS-216:2007-09-21:A:replicateID1024</code>
</td>
</tr>
<tr class="even">
<td><code>occurrenceID</code></td>
<td>The identifier of the occurrence the measurement or fact refers to.
If not applicable, it should be left empty.</td>
<td>Only needed if you have measurements that you need to link back to
an occurrence like weight, length, abundance, etc.</td>
<td>
<code>urn:catalog:UWBM:Bird:89776</code> <br><code>Station_95_Date_09JAN1997:14:35:00.000_Atractosteus_spatula</code>
<br><code>FFS-216:2007-09-21:A:replicateID1024:objectID1345330</code>
</td>
</tr>
<tr class="odd">
<td><code>measurementID</code></td>
<td>An identifier for the MeasurementOrFact (information pertaining to
measurements, facts, characteristics, or assertions). May be a global
unique identifier or an identifier specific to the data set.</td>
<td>This is not necessarily required when creating the eMoF but it can
be useful, especially if you would like a way to identify a specific
measurement in the data</td>
<td><code>9c752d22-b09a-11e8-96f8-529269fb1459</code></td>
</tr>
<tr class="even">
<td><code>measurementType</code></td>
<td>The nature of the measurement, fact, characteristic, or assertion.
Recommended best practice is to use a controlled vocabulary.</td>
<td></td>
<td>
<code>temperature</code><br><code>salinity</code><br><code>length</code><br><code>device type</code>
</td>
</tr>
<tr class="odd">
<td><code>measurementTypeID</code></td>
<td>An identifier for the measurementType (global unique identifier,
URI). The identifier should reference the measurementType in a
vocabulary.</td>
<td>OBIS uses NERC to provide these but you can use other vocabularies
or ontologies like ENVO or others. When using NERC vocabulary terms, you
must choose a term from the P01 collection.</td>
<td>
<code>http://vocab.nerc.ac.uk/collection/P01/current/TEMPPR01/</code><br><code>http://vocab.nerc.ac.uk/collection/P01/current/ODSDM021/</code><br><code>http://vocab.nerc.ac.uk/collection/P01/current/OBSINDLX/</code>
<br>
`<code>| |</code>measurementValue<code>| The value of the measurement, fact, characteristic, or assertion |  |</code>20<code>&lt;br/&gt;</code>61.5<code>&lt;br/&gt;</code>121<code>&lt;br/&gt;</code>Van
Veen
grab<code>| |</code>measurementValueID<code>| An identifier for facts stored in the column measurementValue (global unique identifier, URI). This identifier can reference a controlled vocabulary (e.g. for sampling instrument names, methodologies, life stages) or reference a methodology paper with a DOI. When the measurementValue refers to a value and not to a fact, the **measurementvalueID has no meaning and should remain empty**. |  |</code><a href="http://vocab.nerc.ac.uk/collection/L22/current/TOOL0653/" class="external-link uri">http://vocab.nerc.ac.uk/collection/L22/current/TOOL0653/</a><code>| |</code>measurementAccuracy<code>| The description of the potential error associated with the measurementValue. |  |</code>0.01
C<code>&lt;br/&gt;</code>0.03<code>&lt;br/&gt;</code>5
mm<code>| |</code>measurementUnit<code>| The units associated with the measurementValue. Recommended best practice is to use the International System of Units (SI). |  |</code>C<code>&lt;br/&gt;</code>PPT<code>&lt;br/&gt;</code>mm<code>| |</code>measurementUnitID<code>| An identifier for the measurementUnit (global unique identifier, URI). The identifier should reference the measurementUnit in a vocabulary. | Recommended practice is populate this field with a term from NERC vocablary's P06 collection |</code><a href="http://vocab.nerc.ac.uk/collection/P06/current/UPAA/" class="external-link uri">http://vocab.nerc.ac.uk/collection/P06/current/UPAA/</a><code>&lt;br/&gt;</code><a href="http://vocab.nerc.ac.uk/collection/P06/current/UPPT/" class="external-link uri">http://vocab.nerc.ac.uk/collection/P06/current/UPPT/</a><code>&lt;br/&gt;</code><a href="http://vocab.nerc.ac.uk/collection/P06/current/UXMM/" class="external-link uri">http://vocab.nerc.ac.uk/collection/P06/current/UXMM/</a>`</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<p>Over at the <a href="https://github.com/ioos/bio_data_guide" class="external-link">IOOS Bio
Data Guide repository</a> you can see <a href="https://github.com/ioos/bio_data_guide/blob/main/datasets/TPWD_HARC_BagSeine/TPWD_HARC_BagSeine_OBISENV.md" class="external-link">a
script</a> that was used to take data in its original form and align it
to Darwin Core Event Core with Extended Measurement or Fact. More
information on how to organize data fields into Event and Measurement or
Fact can be found in the <a href="https://manual.obis.org/" class="external-link">OBIS
Manual</a></p>
<figure><img src="../fig/processing_script_screenshot.png" class="figure mx-auto d-block"></figure><p>*A screenshot of the script available for aligning data to Darwin
Core.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Darwin Core uses cores and extensions to model the multitude of
biological observation data that exists.</li>
<li>OBIS uses the Event (or Occurrence) Core with the Extended
Measurement or Fact extension to make sure no information is lost.</li>
<li>Additional fields are required and put into different files when
using a Core with the Extended Measurement or Fact extension.</li>
<li>ID fields are important keys in your data and we recommend building
them from the information in your data.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-05-break"><p>Content from <a href="05-break.html">Social Break</a></p>
<hr>
<p>Last updated on 2025-02-28 |

        <a href="https://github.com/MathewBiddle/test_workshop/edit/main/episodes/05-break.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<p><img src="https://imgs.xkcd.com/comics/iso_8601_2x.png" alt="xkcd 1179 (iso 8601)" class="figure"><em>Image credit: <a href="https://xkcd.com/" class="external-link">xkcd</a></em></p></section><section id="aio-06-qa-qc"><p>Content from <a href="06-qa-qc.html">QA/QC</a></p>
<hr>
<p>Last updated on 2025-02-28 |

        <a href="https://github.com/MathewBiddle/test_workshop/edit/main/episodes/06-qa-qc.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 120 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I QC my data?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>“Data enhancement and quality control”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="data-enhancement-and-quality-control">Data enhancement and quality control<a class="anchor" aria-label="anchor" href="#data-enhancement-and-quality-control"></a>
</h2>
<hr class="half-width">
<p>OBIS performs a number of quality checks on the data it receives. Red
quality flags are attached to occurrence records if errors are
encountered, and records may also be rejected if they do not meet
minimum requirements. The checks that OBIS performs are documented <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4309024/pdf/bau125.pdf" class="external-link">here</a>
and a python implementation is available <a href="https://github.com/iobis/obis-qc" class="external-link">here</a>. Therefore, prior to
publishing your data to OBIS and/or GBIF, it is important to perform
quality control on your standardized data. This can help identify any
outliers or “faulty” data. It will also help with ensuring that your
data is compatible and interoperable with other datasets published to
OBIS. There are numerous functions within the <a href="https://github.com/iobis/obistools" class="external-link">obistools</a> R packages that
can serve to identify outliers, inspect quality or ensure that the
dataset structure fits the required format for both the Event and
Occurrence tables.</p>
<div id="recommended-initial-checks-on-your-data" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="recommended-initial-checks-on-your-data" class="callout-inner">
<h3 class="callout-title">
<span class="emoji" data-emoji="pushpin">📌</span> Recommended initial checks on your
data</h3>
<div class="callout-content">
<ul>
<li>Check that all the <a href="../01-introduction/index.html#what-are-the-required-darwin-core-terms-for-publishing-to-obis">required
Darwin Core terms</a> are present and contain the correct
information.</li>
<li>Make a map from your data to ensure the coordinates are valid and
within your expected range.</li>
<li>Run basic statistics on each column of numeric data (min, max, mean,
std. dev., etc.) to identify potential issues.</li>
<li>Look at unique values of columns containing string entries to
identify potential issues (eg. spelling).</li>
<li>Check for uniqueness of <code>occurrenceID</code> field.</li>
<li>Check for uniqueness of <code>eventID</code> for each event, if
applicable.</li>
<li>Check that dates are following <a href="https://en.wikipedia.org/wiki/ISO_8601" class="external-link">ISO-8601</a>.</li>
<li>Check that the <code>scientificNameID</code> is/are valid.</li>
</ul>
</div>
</div>
</div>
<p>One method for reviewing your data is to use the r package <a href="https://cran.r-project.org/web/packages/Hmisc/index.html" class="external-link">Hmisc</a>
and the function <a href="https://rdrr.io/cran/Hmisc/man/describe.html" class="external-link">describe</a>. Expand
the example below using output from <a href="https://github.com/ioos/bio_data_guide/blob/main/datasets/TPWD_HARC_BagSeine/TPWD_HARC_BagSeine_OBISENV.md" class="external-link">this
notebook</a> to see how it works.</p>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Hmisc::describe </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler1" aria-labelledby="headingSpoiler1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># pull in the occurrence file from https://www.sciencebase.gov/catalog/item/53a887f4e4b075096c60cfdd</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">"https://www.sciencebase.gov/catalog/file/get/53a887f4e4b075096c60cfdd?f=__disk__32%2F24%2F80%2F322480c9bcbad19030e29c9ec5e2caeb54cb4a08&amp;allowOpen=true"</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>occurrence <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(url)</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="fu">head</span>(occurrence,<span class="at">n=</span><span class="dv">1</span>)       </span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>  vernacularName                                eventID occurrenceStatus</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="dv">1</span>  Alligator gar Station_95_Date_09JAN1997<span class="sc">:</span><span class="dv">14</span><span class="sc">:</span><span class="dv">35</span><span class="sc">:</span><span class="fl">00.000</span>           Absent</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>     basisOfRecord       scientificName</span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="dv">1</span> HumanObservation Atractosteus spatula</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a>                           scientificNameID  kingdom   phylum       class</span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="dv">1</span> urn<span class="sc">:</span>lsid<span class="sc">:</span>marinespecies.org<span class="sc">:</span>taxname<span class="sc">:</span><span class="dv">279822</span> Animalia Chordata Actinopteri</span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a>             order        family        genus scientificNameAuthorship</span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a><span class="dv">1</span> Lepisosteiformes Lepisosteidae <span class="fu">Atractosteus</span>        (LacepA<span class="st">"de, 1803)</span></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a><span class="st">  taxonRank organismQuantity organismQuantityType</span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a><span class="st">1   Species                0   Relative Abundance</span></span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a><span class="st">                                                 occurrenceID</span></span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a><span class="st">1 Station_95_Date_09JAN1997:14:35:00.000_Atractosteus_spatula</span></span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a><span class="st">         collectionCode</span></span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a><span class="st">1 Aransas Bay Bag Seine</span></span>
<span id="cb1-21"><a href="#cb1-21" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" tabindex="-1"></a><span class="st">Hmisc::describe(occurrence)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>occurrence

 18  Variables      334341  Observations
--------------------------------------------------------------------------------
vernacularName
       n  missing distinct
  334341        0       61

lowest : Alligator gar        Arrow shrimp         Atlantic brief squid Atlantic bumper      Atlantic croaker
highest: Striped mullet       Thinstripe hermit    Threadfin shad       White mullet         White shrimp
--------------------------------------------------------------------------------
eventID
       n  missing distinct
  334341        0     5481

lowest : Station_10_Date_04DEC1991:13:59:00.000 Station_10_Date_04SEP2002:13:17:00.000 Station_10_Date_05JUN1991:15:20:00.000 Station_10_Date_07APR1995:12:54:00.000 Station_10_Date_07APR2000:11:16:00.000
highest: Station_99_Date_21APR1998:18:24:00.000 Station_99_Date_22OCT2001:13:12:00.000 Station_99_Date_25JUN1990:13:48:00.000 Station_99_Date_25NOV2003:11:11:00.000 Station_99_Date_27JUN1988:12:45:00.000
--------------------------------------------------------------------------------
occurrenceStatus
       n  missing distinct
  334341        0        2

Value       Absent Present
Frequency   294469   39872
Proportion   0.881   0.119
--------------------------------------------------------------------------------
basisOfRecord
               n          missing         distinct            value
          334341                0                1 HumanObservation

Value      HumanObservation
Frequency            334341
Proportion                1
--------------------------------------------------------------------------------
scientificName
       n  missing distinct
  334341        0       61

lowest : Adinia xenica               Anchoa mitchilli            Archosargus probatocephalus Ariopsis felis              Atractosteus spatula
highest: Stomatopoda                 Stomolophus meleagris       Syngnathus scovelli         Tozeuma carolinense         Trichiurus lepturus
--------------------------------------------------------------------------------
scientificNameID
       n  missing distinct
  334341        0       61

lowest : urn:lsid:marinespecies.org:taxname:105792 urn:lsid:marinespecies.org:taxname:107034 urn:lsid:marinespecies.org:taxname:107379 urn:lsid:marinespecies.org:taxname:126983 urn:lsid:marinespecies.org:taxname:127089
highest: urn:lsid:marinespecies.org:taxname:367528 urn:lsid:marinespecies.org:taxname:396707 urn:lsid:marinespecies.org:taxname:421784 urn:lsid:marinespecies.org:taxname:422069 urn:lsid:marinespecies.org:taxname:443955

--------------------------------------------------------------------------------
kingdom
       n  missing distinct    value
  334341        0        1 Animalia

Value      Animalia
Frequency    334341
Proportion        1
--------------------------------------------------------------------------------
phylum
       n  missing distinct
  328860     5481        4

Value      Arthropoda   Chordata   Cnidaria   Mollusca
Frequency       71253     246645       5481       5481
Proportion      0.217      0.750      0.017      0.017
--------------------------------------------------------------------------------
class
       n  missing distinct
  328860     5481        5

lowest : Actinopteri    Cephalopoda    Elasmobranchii Malacostraca   Scyphozoa
highest: Actinopteri    Cephalopoda    Elasmobranchii Malacostraca   Scyphozoa

Value         Actinopteri    Cephalopoda Elasmobranchii   Malacostraca
Frequency          235683           5481          10962          71253
Proportion          0.717          0.017          0.033          0.217

Value           Scyphozoa
Frequency            5481
Proportion          0.017
--------------------------------------------------------------------------------
order
       n  missing distinct
  328860     5481       22

lowest : Atheriniformes            Batrachoidiformes         Carangaria incertae sedis Carangiformes             Carcharhiniformes
highest: Rhizostomeae              Scombriformes             Siluriformes              Syngnathiformes           Tetraodontiformes
--------------------------------------------------------------------------------
family
       n  missing distinct
  328860     5481       36

lowest : Ariidae        Atherinopsidae Batrachoididae Carangidae     Carcharhinidae
highest: Stromateidae   Syngnathidae   Tetraodontidae Trichiuridae   Triglidae
--------------------------------------------------------------------------------
genus
       n  missing distinct
  328860     5481       52

lowest : Adinia       Anchoa       Archosargus  Ariopsis     Atractosteus
highest: Sphoeroides  Stomolophus  Syngnathus   Tozeuma      Trichiurus
--------------------------------------------------------------------------------
scientificNameAuthorship
       n  missing distinct
  328860     5481       52

lowest : (Baird &amp; Girard, 1853)        (Baird &amp; Girard, 1855)        (Blainville, 1823)            (Bosc, 1801)                  (Burkenroad, 1939)
highest: Rathbun, 1896                 Say, 1817 [in Say, 1817-1818] Shipp &amp; Yerger, 1969          Valenciennes, 1836            Winchell, 1864
--------------------------------------------------------------------------------
taxonRank
       n  missing distinct
  334341        0        3

Value        Genus   Order Species
Frequency     5481    5481  323379
Proportion   0.016   0.016   0.967
--------------------------------------------------------------------------------
organismQuantity
       n  missing distinct     Info     Mean      Gmd      .05      .10
  334341        0     8696    0.317  0.01639  0.03141  0.00000  0.00000
     .25      .50      .75      .90      .95
 0.00000  0.00000  0.00000  0.01005  0.07407

lowest : 0.0000000000 0.0000917684 0.0001835370 0.0002136300 0.0002241650
highest: 0.9969931270 0.9974226800 0.9981570220 0.9982300880 1.0000000000
--------------------------------------------------------------------------------
organismQuantityType
                 n            missing           distinct              value
            334341                  0                  1 Relative Abundance

Value      Relative Abundance
Frequency              334341
                    n               missing              distinct
              334341                     0                     1
                value
Aransas Bay Bag Seine

Value      Aransas Bay Bag Seine
Frequency                 334341
Proportion                     1
--------------------------------------------------------------------------------</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>Perform the following minimal quality assurance and control
checks:</p>
<ol style="list-style-type: decimal">
<li>Run a diagnostics report for the data quality.</li>
<li>Ensure that the eventIDs are unique.</li>
<li>Make sure that the eventDates follow ISO-8601 standards.</li>
<li>Determine whether reported depths are accurate.</li>
</ol>
<p>The event core data used in the checks below can be found in <a href="../data/trawl_fish.xlsx">this Excel file</a>.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="tabs">
<nav><div id="nav-tab-1" class="nav nav-tabs" role="tablist">

</div>
</nav><div id="nav-tabContent-1" class="tab-content">
<div id="nav-tabpanel-1-1" class="tab-pane show active" aria-labelledby="nav-tab-1-1" role="tabpanel">

</div>
<div id="nav-tabpanel-1-2" class="tab-pane" aria-labelledby="nav-tab-1-2" role="tabpanel">
<p>Install <a href="https://github.com/iobis/obistools" class="external-link">obistools</a> R
packages. Use <a href="https://readxl.tidyverse.org/" class="external-link">readxl</a> package
to read the Excel file.</p>
</div>
<div id="nav-tabpanel-1-3" class="tab-pane" aria-labelledby="nav-tab-1-3" role="tabpanel">
<p>Run a diagnostics report for the data quality</p>
</div>
<div id="nav-tabpanel-1-4" class="tab-pane" aria-labelledby="nav-tab-1-4" role="tabpanel">
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">readxl</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">obistools</span><span class="op">)</span></span>
<span></span>
<span><span class="va">trawl_fish</span> <span class="op">&lt;-</span> <span class="fu">readxl</span><span class="fu">::</span><span class="fu">read_excel</span><span class="op">(</span><span class="st">'data/trawl_fish.xlsx'</span><span class="op">)</span></span>
<span><span class="va">report</span> <span class="op">&lt;-</span> <span class="fu">obistools</span><span class="fu">::</span><span class="fu">report</span><span class="op">(</span><span class="va">trawl_fish</span><span class="op">)</span></span>
<span><span class="va">report</span></span></code></pre>
</div>
</div>
<div id="nav-tabpanel-1-5" class="tab-pane" aria-labelledby="nav-tab-1-5" role="tabpanel">
<figure><img src="../fig/screenshot_obistools_report.png" alt="drawing" class="figure mx-auto d-block"><div class="figcaption">drawing</div>
</figure>
</div>
<div id="nav-tabpanel-1-6" class="tab-pane" aria-labelledby="nav-tab-1-6" role="tabpanel">
<p>Check to make sure <code>eventID</code> are unique</p>
</div>
<div id="nav-tabpanel-1-7" class="tab-pane" aria-labelledby="nav-tab-1-7" role="tabpanel">
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eventid</span> <span class="op">&lt;-</span> <span class="fu">obistools</span><span class="fu">::</span><span class="fu">check_eventids</span><span class="op">(</span><span class="va">trawl_fish</span><span class="op">)</span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">eventid</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div id="nav-tabpanel-1-8" class="tab-pane" aria-labelledby="nav-tab-1-8" role="tabpanel">
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 x 4
 field         level   row message
 &lt;chr&gt;         &lt;chr&gt; &lt;int&gt; &lt;chr&gt;
 1 eventID       error     7 eventID IYS:GoA2019:Stn6:trawl is duplicated
 2 eventID       error     8 eventID IYS:GoA2019:Stn6:trawl is duplicated
 3 parentEventID error     1 parentEventID IYS:GoA2019:Stn1 has no corresponding eventID
 4 parentEventID error     2 parentEventID IYS:GoA2019:Stn2 has no corresponding eventID
 5 parentEventID error     3 parentEventID IYS:GoA2019:Stn3 has no corresponding eventID
 6 parentEventID error     4 parentEventID IYS:GoA2019:Stn4 has no corresponding eventID</code></pre>
</div>
</div>
<div id="nav-tabpanel-1-9" class="tab-pane" aria-labelledby="nav-tab-1-9" role="tabpanel">
<p>Check for proper <code>eventDate</code> to ensure they follow ISO
8601 standards:
<code>r     eventDate &lt;- obistools::check_eventdate(trawl_fish)     print(eventDate)</code>
<code>output     # A tibble: 3 x 4      level   row field     message                                                             &lt;chr&gt; &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;                                                              1 error    10 eventDate eventDate 2019-02-24T07u40 does not seem to be a valid date        2 error    13 eventDate eventDate 2019-02-25 11h25min does not seem to be a valid date     3 error    15 eventDate eventDate 2019-26-2 does not seem to be a valid date</code></p>
</div>
<div id="nav-tabpanel-1-10" class="tab-pane" aria-labelledby="nav-tab-1-10" role="tabpanel">
<p>From the report generated under exercise 1, you can already see that
there’s measurements made on land. This information can also be gathered
by plotting the map separately or using the <code>check_onland()</code>
or <code>check_depth()</code> functions in the <a href="https://iobis.github.io/obistools/" class="external-link">obistools</a> package.<br><code>r     depth &lt;- obistools::check_depth(trawl_fish)     onland &lt;- obistools::check_onland(trawl_fish) # Gives the same output.                print(depth)</code>
<code>output     # A tibble: 1 x 16      eventID parentEventID eventDate  year month   day decimalLatitude decimalLongitude footprintWKT coordinateUncer~ minimumDepthInM~      &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;           &lt;dbl&gt;            &lt;dbl&gt; &lt;chr&gt;                   &lt;dbl&gt;            &lt;dbl&gt;     1 IYS:Go~ IYS:GoA2019:~ 2019-02-~  2019     2    22            67.4            -140. LINESTRING ~            2313.                0     # ... with 5 more variables: maximumDepthInMeters &lt;dbl&gt;, samplingProtocol &lt;chr&gt;, locality &lt;chr&gt;, locationID &lt;chr&gt;, type &lt;chr&gt;</code></p>
</div>
<div id="nav-tabpanel-1-11" class="tab-pane" aria-labelledby="nav-tab-1-11" role="tabpanel">
<ol style="list-style-type: decimal">
<li>
<p>Run a diagnostics report for the data quality</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">readxl</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">obistools</span><span class="op">)</span></span>
<span></span>
<span><span class="va">trawl_fish</span> <span class="op">&lt;-</span> <span class="fu">readxl</span><span class="fu">::</span><span class="fu">read_excel</span><span class="op">(</span><span class="st">'data/trawl_fish.xlsx'</span><span class="op">)</span></span>
<span><span class="va">report</span> <span class="op">&lt;-</span> <span class="fu">obistools</span><span class="fu">::</span><span class="fu">report</span><span class="op">(</span><span class="va">trawl_fish</span><span class="op">)</span></span>
<span><span class="va">report</span></span></code></pre>
</div>
<figure><img src="../fig/screenshot_obistools_report.png" alt="drawing" class="figure mx-auto d-block"><div class="figcaption">drawing</div>
</figure>
</li>
<li>
<p>Check to make sure <code>eventID</code> are unique</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eventid</span> <span class="op">&lt;-</span> <span class="fu">obistools</span><span class="fu">::</span><span class="fu">check_eventids</span><span class="op">(</span><span class="va">trawl_fish</span><span class="op">)</span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">eventid</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 x 4
 field         level   row message
 &lt;chr&gt;         &lt;chr&gt; &lt;int&gt; &lt;chr&gt;
 1 eventID       error     7 eventID IYS:GoA2019:Stn6:trawl is duplicated
 2 eventID       error     8 eventID IYS:GoA2019:Stn6:trawl is duplicated
 3 parentEventID error     1 parentEventID IYS:GoA2019:Stn1 has no corresponding eventID
 4 parentEventID error     2 parentEventID IYS:GoA2019:Stn2 has no corresponding eventID
 5 parentEventID error     3 parentEventID IYS:GoA2019:Stn3 has no corresponding eventID
 6 parentEventID error     4 parentEventID IYS:GoA2019:Stn4 has no corresponding eventID</code></pre>
</div>
</li>
<li><p>Check for proper <code>eventDate</code> to ensure they follow ISO
8601 standards:
<code>r     eventDate &lt;- obistools::check_eventdate(trawl_fish)     print(eventDate)</code>
<code>output     # A tibble: 3 x 4      level   row field     message                                                             &lt;chr&gt; &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;                                                              1 error    10 eventDate eventDate 2019-02-24T07u40 does not seem to be a valid date        2 error    13 eventDate eventDate 2019-02-25 11h25min does not seem to be a valid date     3 error    15 eventDate eventDate 2019-26-2 does not seem to be a valid date</code></p></li>
<li><p>From the report generated under exercise 1, you can already see
that there’s measurements made on land. This information can also be
gathered by plotting the map separately or using the
<code>check_onland()</code> or <code>check_depth()</code> functions in
the <a href="https://iobis.github.io/obistools/" class="external-link">obistools</a>
package.<br><code>r     depth &lt;- obistools::check_depth(trawl_fish)     onland &lt;- obistools::check_onland(trawl_fish) # Gives the same output.                print(depth)</code>
<code>output     # A tibble: 1 x 16      eventID parentEventID eventDate  year month   day decimalLatitude decimalLongitude footprintWKT coordinateUncer~ minimumDepthInM~      &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;           &lt;dbl&gt;            &lt;dbl&gt; &lt;chr&gt;                   &lt;dbl&gt;            &lt;dbl&gt;     1 IYS:Go~ IYS:GoA2019:~ 2019-02-~  2019     2    22            67.4            -140. LINESTRING ~            2313.                0     # ... with 5 more variables: maximumDepthInMeters &lt;dbl&gt;, samplingProtocol &lt;chr&gt;, locality &lt;chr&gt;, locationID &lt;chr&gt;, type &lt;chr&gt;</code></p></li>
</ol>
</div>
<div id="nav-tabpanel-1-12" class="tab-pane" aria-labelledby="nav-tab-1-12" role="tabpanel">
<p>Install the <a href="https://pandas.pydata.org/" class="external-link">pandas</a>, <a href="https://scitools.org.uk/cartopy/docs/latest/installing.html" class="external-link">cartopy</a>,
and <a href="https://geopandas.org/en/stable/" class="external-link">geopandas</a> Python
packages. Use pandas to read the Excel file.</p>
</div>
<div id="nav-tabpanel-1-13" class="tab-pane" aria-labelledby="nav-tab-1-13" role="tabpanel">
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>url <span class="op">=</span> <span class="st">'https://ioos.github.io/bio_mobilization_workshop/data/trawl_fish.xlsx'</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>df <span class="op">=</span> pd.read_excel(url) <span class="co"># might need to install openpyxl</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>df[<span class="st">'row'</span>] <span class="op">=</span> df.index.to_numpy()<span class="op">+</span><span class="dv">1</span> <span class="co"># python starts at zero</span></span></code></pre>
</div>
</div>
<div id="nav-tabpanel-1-14" class="tab-pane" aria-labelledby="nav-tab-1-14" role="tabpanel">
<p>Run a diagnostics report for the data quality.</p>
</div>
<div id="nav-tabpanel-1-15" class="tab-pane" aria-labelledby="nav-tab-1-15" role="tabpanel">
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="im">import</span> cartopy.io.shapereader <span class="im">as</span> shpreader</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="im">import</span> shapely.geometry <span class="im">as</span> sgeom</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="im">from</span> shapely.ops <span class="im">import</span> unary_union</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="im">from</span> shapely.prepared <span class="im">import</span> prep</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a>gdf <span class="op">=</span> gpd.GeoDataFrame(df, geometry<span class="op">=</span>gpd.points_from_xy(df.decimalLongitude, df.decimalLatitude))</span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a>land_shp_fname <span class="op">=</span> shpreader.natural_earth(resolution<span class="op">=</span><span class="st">'50m'</span>,</span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a>                                       category<span class="op">=</span><span class="st">'physical'</span>, name<span class="op">=</span><span class="st">'land'</span>)</span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a>land_geom <span class="op">=</span> unary_union(<span class="bu">list</span>(shpreader.Reader(land_shp_fname).geometries()))</span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a>land <span class="op">=</span> prep(land_geom)</span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a></span>
<span id="cb10-16"><a href="#cb10-16" tabindex="-1"></a><span class="cf">for</span> index, row <span class="kw">in</span> gdf.iterrows():</span>
<span id="cb10-17"><a href="#cb10-17" tabindex="-1"></a>    gdf.loc[index, <span class="st">'on_land'</span>] <span class="op">=</span> land.contains(row.geometry)</span>
<span id="cb10-18"><a href="#cb10-18" tabindex="-1"></a></span>
<span id="cb10-19"><a href="#cb10-19" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots(ncols<span class="op">=</span><span class="dv">1</span>,nrows<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb10-20"><a href="#cb10-20" tabindex="-1"></a><span class="co"># Make a map:</span></span>
<span id="cb10-21"><a href="#cb10-21" tabindex="-1"></a>xlim <span class="op">=</span> ([gdf.total_bounds[<span class="dv">0</span>]<span class="op">-</span><span class="dv">2</span>,  gdf.total_bounds[<span class="dv">2</span>]<span class="op">+</span><span class="dv">2</span>])</span>
<span id="cb10-22"><a href="#cb10-22" tabindex="-1"></a>ylim <span class="op">=</span> ([gdf.total_bounds[<span class="dv">1</span>]<span class="op">-</span><span class="dv">2</span>,  gdf.total_bounds[<span class="dv">3</span>]<span class="op">+</span><span class="dv">2</span>])</span>
<span id="cb10-23"><a href="#cb10-23" tabindex="-1"></a></span>
<span id="cb10-24"><a href="#cb10-24" tabindex="-1"></a>axs[<span class="dv">0</span>].set_xlim(xlim)</span>
<span id="cb10-25"><a href="#cb10-25" tabindex="-1"></a>axs[<span class="dv">0</span>].set_ylim(ylim)</span>
<span id="cb10-26"><a href="#cb10-26" tabindex="-1"></a></span>
<span id="cb10-27"><a href="#cb10-27" tabindex="-1"></a>gpd.read_file(land_shp_fname).plot(ax<span class="op">=</span>axs[<span class="dv">0</span>])</span>
<span id="cb10-28"><a href="#cb10-28" tabindex="-1"></a></span>
<span id="cb10-29"><a href="#cb10-29" tabindex="-1"></a>gdf.loc[gdf[<span class="st">'on_land'</span>]<span class="op">==</span><span class="va">False</span>].plot(ax<span class="op">=</span>axs[<span class="dv">0</span>], color<span class="op">=</span><span class="st">'green'</span>, markersize<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb10-30"><a href="#cb10-30" tabindex="-1"></a>gdf.loc[gdf[<span class="st">'on_land'</span>]<span class="op">==</span><span class="va">True</span>].plot(ax<span class="op">=</span>axs[<span class="dv">0</span>], color<span class="op">=</span><span class="st">'red'</span>, markersize<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb10-31"><a href="#cb10-31" tabindex="-1"></a></span>
<span id="cb10-32"><a href="#cb10-32" tabindex="-1"></a><span class="co"># Collect some informational material about potential issues w/ data:</span></span>
<span id="cb10-33"><a href="#cb10-33" tabindex="-1"></a>invalid_coord <span class="op">=</span> []</span>
<span id="cb10-34"><a href="#cb10-34" tabindex="-1"></a><span class="cf">if</span> <span class="bu">len</span>(gdf.loc[gdf[<span class="st">'on_land'</span>]<span class="op">==</span><span class="va">True</span>]) <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb10-35"><a href="#cb10-35" tabindex="-1"></a>   invalid_coord.append(<span class="st">'Row </span><span class="sc">{}</span><span class="st"> coordinates on land.'</span>.<span class="bu">format</span>(gdf.loc[gdf[<span class="st">'on_land'</span>] <span class="op">==</span> <span class="va">True</span>,<span class="st">'row'</span>].tolist()[<span class="dv">0</span>]))</span>
<span id="cb10-36"><a href="#cb10-36" tabindex="-1"></a></span>
<span id="cb10-37"><a href="#cb10-37" tabindex="-1"></a>req_cols <span class="op">=</span> [<span class="st">'eventDate'</span>, <span class="st">'decimalLongitude'</span>, <span class="st">'decimalLatitude'</span>, <span class="st">'scientificName'</span>, <span class="st">'scientificNameID'</span>, <span class="st">'occurrenceStatus'</span>, <span class="st">'basisOfRecord'</span>]</span>
<span id="cb10-38"><a href="#cb10-38" tabindex="-1"></a>missing_cols <span class="op">=</span> []</span>
<span id="cb10-39"><a href="#cb10-39" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> req_cols:</span>
<span id="cb10-40"><a href="#cb10-40" tabindex="-1"></a> <span class="cf">if</span> col <span class="kw">not</span> <span class="kw">in</span> gdf.columns:</span>
<span id="cb10-41"><a href="#cb10-41" tabindex="-1"></a>   missing_cols.append(<span class="st">'Column </span><span class="sc">{}</span><span class="st"> is missing.'</span>.<span class="bu">format</span>(col))</span>
<span id="cb10-42"><a href="#cb10-42" tabindex="-1"></a></span>
<span id="cb10-43"><a href="#cb10-43" tabindex="-1"></a><span class="co"># Add the information to the figure</span></span>
<span id="cb10-44"><a href="#cb10-44" tabindex="-1"></a>axs[<span class="dv">1</span>].text(<span class="fl">0.25</span>,<span class="fl">0.25</span>,<span class="st">'</span><span class="ch">\n</span><span class="st">'</span>.join([<span class="st">'</span><span class="ch">\n</span><span class="st">'</span>.join(missing_cols),<span class="st">'</span><span class="ch">\n</span><span class="st">'</span>.join(invalid_coord)]))</span>
<span id="cb10-45"><a href="#cb10-45" tabindex="-1"></a>axs[<span class="dv">1</span>].axis(<span class="st">'off'</span>)</span>
<span id="cb10-46"><a href="#cb10-46" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
</div>
<div id="nav-tabpanel-1-16" class="tab-pane" aria-labelledby="nav-tab-1-16" role="tabpanel">
<figure><img src="../fig/screenshot_python_report.png" alt="drawing" class="figure mx-auto d-block"><div class="figcaption">drawing</div>
</figure>
</div>
<div id="nav-tabpanel-1-17" class="tab-pane" aria-labelledby="nav-tab-1-17" role="tabpanel">
<p>Check to make sure <code>eventID</code> are unique</p>
</div>
<div id="nav-tabpanel-1-18" class="tab-pane" aria-labelledby="nav-tab-1-18" role="tabpanel">
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>dup_events <span class="op">=</span> df.loc[df[<span class="st">'eventID'</span>].duplicated()]</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Duplicated eventID:</span><span class="ch">\n</span><span class="st">'</span>,dup_events[[<span class="st">'eventID'</span>,<span class="st">'row'</span>]])</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>parent_not_event <span class="op">=</span> df.loc[<span class="op">~</span>df[<span class="st">'eventID'</span>].isin(df[<span class="st">'parentEventID'</span>].unique())]</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'</span><span class="ch">\n</span><span class="st">parentEventID missing corresponding eventID:</span><span class="ch">\n</span><span class="st">'</span>, parent_not_event[[<span class="st">'parentEventID'</span>,<span class="st">'row'</span>]])</span></code></pre>
</div>
</div>
<div id="nav-tabpanel-1-19" class="tab-pane" aria-labelledby="nav-tab-1-19" role="tabpanel">
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Duplicated eventID:
                   eventID  row
6  IYS:GoA2019:Stn6:trawl    7
7  IYS:GoA2019:Stn6:trawl    8

parentEventID missing corresponding eventID:
         parentEventID  row
0    IYS:GoA2019:Stn1    1
1    IYS:GoA2019:Stn2    2
2    IYS:GoA2019:Stn3    3
3    IYS:GoA2019:Stn4    4
4    IYS:GoA2019:Stn5    5
..                ...  ...
59  IYS:GoA2019:Stn60   60
60  IYS:GoA2019:Stn61   61
61  IYS:GoA2019:Stn62   62
62  IYS:GoA2019:Stn63   63
63  IYS:GoA2019:Stn64   64
[64 rows x 2 columns]</code></pre>
</div>
</div>
<div id="nav-tabpanel-1-20" class="tab-pane" aria-labelledby="nav-tab-1-20" role="tabpanel">
<p>Check for proper <code>eventDate</code> to ensure they follow ISO
8601 standards:</p>
</div>
<div id="nav-tabpanel-1-21" class="tab-pane" aria-labelledby="nav-tab-1-21" role="tabpanel">
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="cf">for</span> date <span class="kw">in</span> df[<span class="st">'eventDate'</span>]:</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>        pd.to_datetime(date)</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>    <span class="cf">except</span>:</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Date"</span>,date,<span class="st">"might not follow ISO 8601"</span>)</span></code></pre>
</div>
</div>
<div id="nav-tabpanel-1-22" class="tab-pane" aria-labelledby="nav-tab-1-22" role="tabpanel">
<p>From the report generated under exercise 1, you can already see that
there’s measurements made on land. Now let’s check the depths are within
reason for the points. Let’s use the <a href="https://coastwatch.pfeg.noaa.gov/erddap/griddap/GEBCO_2020.html" class="external-link">GEBCO
bathymetry dataset served in the coastwatch ERDDAP</a>.</p>
</div>
<div id="nav-tabpanel-1-23" class="tab-pane" aria-labelledby="nav-tab-1-23" role="tabpanel">
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>df[<span class="st">'bathy'</span>] <span class="op">=</span> np.nan <span class="co"># initialize column</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="cf">for</span> index, row <span class="kw">in</span> df.iterrows():</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>    base_url <span class="op">=</span> <span class="st">'https://coastwatch.pfeg.noaa.gov/erddap/griddap/GEBCO_2020.csvp?'</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a>    query_url <span class="op">=</span> <span class="st">'elevation%5B(</span><span class="sc">{}</span><span class="st">)%5D%5B(</span><span class="sc">{}</span><span class="st">)%5D'</span>.<span class="bu">format</span>(row[<span class="st">'decimalLatitude'</span>],row[<span class="st">'decimalLongitude'</span>])</span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a>    url <span class="op">=</span> base_url<span class="op">+</span>query_url</span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a>    bathy <span class="op">=</span> pd.read_csv(url)</span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a>    df.at[index,<span class="st">'bathy'</span>] <span class="op">=</span> bathy[<span class="st">'elevation (m)'</span>] <span class="co"># insert bathymetry value</span></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a>    time.sleep(<span class="fl">0.5</span>) <span class="co"># to not ping erddap too much</span></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a></span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a><span class="co"># make new column for depth in meters as negative because GEBCO is Elevation relative to sea level</span></span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a>df[<span class="st">'neg_maximumDepthInMeters'</span>] <span class="op">=</span> <span class="op">-</span><span class="dv">1</span><span class="op">*</span>df[<span class="st">'maximumDepthInMeters'</span>]</span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a></span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'maximumDepthInMeters deeper than GEBCO bathymetry:'</span>)</span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a><span class="cf">if</span> <span class="bu">len</span>( df.loc[df[<span class="st">'neg_maximumDepthInMeters'</span>] <span class="op">&lt;</span> df[<span class="st">'bathy'</span>]] ) <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb14-19"><a href="#cb14-19" tabindex="-1"></a>   <span class="bu">print</span>(df.loc[df[<span class="st">'neg_maximumDepthInMeters'</span>] <span class="op">&lt;</span> df[<span class="st">'bathy'</span>]].T)</span>
<span id="cb14-20"><a href="#cb14-20" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb14-21"><a href="#cb14-21" tabindex="-1"></a>   <span class="bu">print</span>(<span class="st">'None'</span>)</span></code></pre>
</div>
</div>
<div id="nav-tabpanel-1-24" class="tab-pane" aria-labelledby="nav-tab-1-24" role="tabpanel">
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>maximumDepthInMeters deeper than GEBCO bathymetry:
                                                                              4
eventID                                                  IYS:GoA2019:Stn5:trawl
parentEventID                                                  IYS:GoA2019:Stn5
eventDate                             2019-02-22T09:49:00Z/2019-02-22T10:49:00Z
year                                                                       2019
month                                                                         2
day                                                                          22
decimalLatitude                                                       67.399004
decimalLongitude                                                    -139.552501
footprintWKT                   LINESTRING ( -139.583 67.397 , -139.522 67.401 )
coordinateUncertaintyInMeters                                       2313.094678
minimumDepthInMeters                                                          0
maximumDepthInMeters                                                       33.2
samplingProtocol                                                 midwater trawl
locality                                                                    NaN
locationID                                                                  NaN
type                                                             midwater trawl
row                                                                           5
bathy                                                                     306.0
neg_maximumDepthInMeters                                                  -33.2</code></pre>
</div>
</div>
<div id="nav-tabpanel-1-25" class="tab-pane" aria-labelledby="nav-tab-1-25" role="tabpanel">
<ol style="list-style-type: decimal">
<li>
<p>Run a diagnostics report for the data quality.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="im">import</span> cartopy.io.shapereader <span class="im">as</span> shpreader</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="im">import</span> shapely.geometry <span class="im">as</span> sgeom</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="im">from</span> shapely.ops <span class="im">import</span> unary_union</span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a><span class="im">from</span> shapely.prepared <span class="im">import</span> prep</span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a>gdf <span class="op">=</span> gpd.GeoDataFrame(df, geometry<span class="op">=</span>gpd.points_from_xy(df.decimalLongitude, df.decimalLatitude))</span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a>land_shp_fname <span class="op">=</span> shpreader.natural_earth(resolution<span class="op">=</span><span class="st">'50m'</span>,</span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a>                                       category<span class="op">=</span><span class="st">'physical'</span>, name<span class="op">=</span><span class="st">'land'</span>)</span>
<span id="cb16-12"><a href="#cb16-12" tabindex="-1"></a></span>
<span id="cb16-13"><a href="#cb16-13" tabindex="-1"></a>land_geom <span class="op">=</span> unary_union(<span class="bu">list</span>(shpreader.Reader(land_shp_fname).geometries()))</span>
<span id="cb16-14"><a href="#cb16-14" tabindex="-1"></a>land <span class="op">=</span> prep(land_geom)</span>
<span id="cb16-15"><a href="#cb16-15" tabindex="-1"></a></span>
<span id="cb16-16"><a href="#cb16-16" tabindex="-1"></a><span class="cf">for</span> index, row <span class="kw">in</span> gdf.iterrows():</span>
<span id="cb16-17"><a href="#cb16-17" tabindex="-1"></a>    gdf.loc[index, <span class="st">'on_land'</span>] <span class="op">=</span> land.contains(row.geometry)</span>
<span id="cb16-18"><a href="#cb16-18" tabindex="-1"></a></span>
<span id="cb16-19"><a href="#cb16-19" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots(ncols<span class="op">=</span><span class="dv">1</span>,nrows<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb16-20"><a href="#cb16-20" tabindex="-1"></a><span class="co"># Make a map:</span></span>
<span id="cb16-21"><a href="#cb16-21" tabindex="-1"></a>xlim <span class="op">=</span> ([gdf.total_bounds[<span class="dv">0</span>]<span class="op">-</span><span class="dv">2</span>,  gdf.total_bounds[<span class="dv">2</span>]<span class="op">+</span><span class="dv">2</span>])</span>
<span id="cb16-22"><a href="#cb16-22" tabindex="-1"></a>ylim <span class="op">=</span> ([gdf.total_bounds[<span class="dv">1</span>]<span class="op">-</span><span class="dv">2</span>,  gdf.total_bounds[<span class="dv">3</span>]<span class="op">+</span><span class="dv">2</span>])</span>
<span id="cb16-23"><a href="#cb16-23" tabindex="-1"></a></span>
<span id="cb16-24"><a href="#cb16-24" tabindex="-1"></a>axs[<span class="dv">0</span>].set_xlim(xlim)</span>
<span id="cb16-25"><a href="#cb16-25" tabindex="-1"></a>axs[<span class="dv">0</span>].set_ylim(ylim)</span>
<span id="cb16-26"><a href="#cb16-26" tabindex="-1"></a></span>
<span id="cb16-27"><a href="#cb16-27" tabindex="-1"></a>gpd.read_file(land_shp_fname).plot(ax<span class="op">=</span>axs[<span class="dv">0</span>])</span>
<span id="cb16-28"><a href="#cb16-28" tabindex="-1"></a></span>
<span id="cb16-29"><a href="#cb16-29" tabindex="-1"></a>gdf.loc[gdf[<span class="st">'on_land'</span>]<span class="op">==</span><span class="va">False</span>].plot(ax<span class="op">=</span>axs[<span class="dv">0</span>], color<span class="op">=</span><span class="st">'green'</span>, markersize<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb16-30"><a href="#cb16-30" tabindex="-1"></a>gdf.loc[gdf[<span class="st">'on_land'</span>]<span class="op">==</span><span class="va">True</span>].plot(ax<span class="op">=</span>axs[<span class="dv">0</span>], color<span class="op">=</span><span class="st">'red'</span>, markersize<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb16-31"><a href="#cb16-31" tabindex="-1"></a></span>
<span id="cb16-32"><a href="#cb16-32" tabindex="-1"></a><span class="co"># Collect some informational material about potential issues w/ data:</span></span>
<span id="cb16-33"><a href="#cb16-33" tabindex="-1"></a>invalid_coord <span class="op">=</span> []</span>
<span id="cb16-34"><a href="#cb16-34" tabindex="-1"></a><span class="cf">if</span> <span class="bu">len</span>(gdf.loc[gdf[<span class="st">'on_land'</span>]<span class="op">==</span><span class="va">True</span>]) <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb16-35"><a href="#cb16-35" tabindex="-1"></a>   invalid_coord.append(<span class="st">'Row </span><span class="sc">{}</span><span class="st"> coordinates on land.'</span>.<span class="bu">format</span>(gdf.loc[gdf[<span class="st">'on_land'</span>] <span class="op">==</span> <span class="va">True</span>,<span class="st">'row'</span>].tolist()[<span class="dv">0</span>]))</span>
<span id="cb16-36"><a href="#cb16-36" tabindex="-1"></a></span>
<span id="cb16-37"><a href="#cb16-37" tabindex="-1"></a>req_cols <span class="op">=</span> [<span class="st">'eventDate'</span>, <span class="st">'decimalLongitude'</span>, <span class="st">'decimalLatitude'</span>, <span class="st">'scientificName'</span>, <span class="st">'scientificNameID'</span>, <span class="st">'occurrenceStatus'</span>, <span class="st">'basisOfRecord'</span>]</span>
<span id="cb16-38"><a href="#cb16-38" tabindex="-1"></a>missing_cols <span class="op">=</span> []</span>
<span id="cb16-39"><a href="#cb16-39" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> req_cols:</span>
<span id="cb16-40"><a href="#cb16-40" tabindex="-1"></a> <span class="cf">if</span> col <span class="kw">not</span> <span class="kw">in</span> gdf.columns:</span>
<span id="cb16-41"><a href="#cb16-41" tabindex="-1"></a>   missing_cols.append(<span class="st">'Column </span><span class="sc">{}</span><span class="st"> is missing.'</span>.<span class="bu">format</span>(col))</span>
<span id="cb16-42"><a href="#cb16-42" tabindex="-1"></a></span>
<span id="cb16-43"><a href="#cb16-43" tabindex="-1"></a><span class="co"># Add the information to the figure</span></span>
<span id="cb16-44"><a href="#cb16-44" tabindex="-1"></a>axs[<span class="dv">1</span>].text(<span class="fl">0.25</span>,<span class="fl">0.25</span>,<span class="st">'</span><span class="ch">\n</span><span class="st">'</span>.join([<span class="st">'</span><span class="ch">\n</span><span class="st">'</span>.join(missing_cols),<span class="st">'</span><span class="ch">\n</span><span class="st">'</span>.join(invalid_coord)]))</span>
<span id="cb16-45"><a href="#cb16-45" tabindex="-1"></a>axs[<span class="dv">1</span>].axis(<span class="st">'off'</span>)</span>
<span id="cb16-46"><a href="#cb16-46" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
<figure><img src="../fig/screenshot_python_report.png" alt="drawing" class="figure mx-auto d-block"><div class="figcaption">drawing</div>
</figure>
</li>
<li>
<p>Check to make sure <code>eventID</code> are unique</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>dup_events <span class="op">=</span> df.loc[df[<span class="st">'eventID'</span>].duplicated()]</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Duplicated eventID:</span><span class="ch">\n</span><span class="st">'</span>,dup_events[[<span class="st">'eventID'</span>,<span class="st">'row'</span>]])</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>parent_not_event <span class="op">=</span> df.loc[<span class="op">~</span>df[<span class="st">'eventID'</span>].isin(df[<span class="st">'parentEventID'</span>].unique())]</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'</span><span class="ch">\n</span><span class="st">parentEventID missing corresponding eventID:</span><span class="ch">\n</span><span class="st">'</span>, parent_not_event[[<span class="st">'parentEventID'</span>,<span class="st">'row'</span>]])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Duplicated eventID:
                   eventID  row
6  IYS:GoA2019:Stn6:trawl    7
7  IYS:GoA2019:Stn6:trawl    8

parentEventID missing corresponding eventID:
         parentEventID  row
0    IYS:GoA2019:Stn1    1
1    IYS:GoA2019:Stn2    2
2    IYS:GoA2019:Stn3    3
3    IYS:GoA2019:Stn4    4
4    IYS:GoA2019:Stn5    5
..                ...  ...
59  IYS:GoA2019:Stn60   60
60  IYS:GoA2019:Stn61   61
61  IYS:GoA2019:Stn62   62
62  IYS:GoA2019:Stn63   63
63  IYS:GoA2019:Stn64   64
[64 rows x 2 columns]</code></pre>
</div>
</li>
<li>
<p>Check for proper <code>eventDate</code> to ensure they follow ISO
8601 standards:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="cf">for</span> date <span class="kw">in</span> df[<span class="st">'eventDate'</span>]:</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>        pd.to_datetime(date)</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>    <span class="cf">except</span>:</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Date"</span>,date,<span class="st">"might not follow ISO 8601"</span>)</span></code></pre>
</div>
</li>
<li>
<p>From the report generated under exercise 1, you can already see
that there’s measurements made on land. Now let’s check the depths are
within reason for the points. Let’s use the <a href="https://coastwatch.pfeg.noaa.gov/erddap/griddap/GEBCO_2020.html" class="external-link">GEBCO
bathymetry dataset served in the coastwatch ERDDAP</a>.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>df[<span class="st">'bathy'</span>] <span class="op">=</span> np.nan <span class="co"># initialize column</span></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a><span class="cf">for</span> index, row <span class="kw">in</span> df.iterrows():</span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a>    base_url <span class="op">=</span> <span class="st">'https://coastwatch.pfeg.noaa.gov/erddap/griddap/GEBCO_2020.csvp?'</span></span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a>    query_url <span class="op">=</span> <span class="st">'elevation%5B(</span><span class="sc">{}</span><span class="st">)%5D%5B(</span><span class="sc">{}</span><span class="st">)%5D'</span>.<span class="bu">format</span>(row[<span class="st">'decimalLatitude'</span>],row[<span class="st">'decimalLongitude'</span>])</span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a>    url <span class="op">=</span> base_url<span class="op">+</span>query_url</span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a>    bathy <span class="op">=</span> pd.read_csv(url)</span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a>    df.at[index,<span class="st">'bathy'</span>] <span class="op">=</span> bathy[<span class="st">'elevation (m)'</span>] <span class="co"># insert bathymetry value</span></span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a>    time.sleep(<span class="fl">0.5</span>) <span class="co"># to not ping erddap too much</span></span>
<span id="cb20-13"><a href="#cb20-13" tabindex="-1"></a></span>
<span id="cb20-14"><a href="#cb20-14" tabindex="-1"></a><span class="co"># make new column for depth in meters as negative because GEBCO is Elevation relative to sea level</span></span>
<span id="cb20-15"><a href="#cb20-15" tabindex="-1"></a>df[<span class="st">'neg_maximumDepthInMeters'</span>] <span class="op">=</span> <span class="op">-</span><span class="dv">1</span><span class="op">*</span>df[<span class="st">'maximumDepthInMeters'</span>]</span>
<span id="cb20-16"><a href="#cb20-16" tabindex="-1"></a></span>
<span id="cb20-17"><a href="#cb20-17" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'maximumDepthInMeters deeper than GEBCO bathymetry:'</span>)</span>
<span id="cb20-18"><a href="#cb20-18" tabindex="-1"></a><span class="cf">if</span> <span class="bu">len</span>( df.loc[df[<span class="st">'neg_maximumDepthInMeters'</span>] <span class="op">&lt;</span> df[<span class="st">'bathy'</span>]] ) <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb20-19"><a href="#cb20-19" tabindex="-1"></a>   <span class="bu">print</span>(df.loc[df[<span class="st">'neg_maximumDepthInMeters'</span>] <span class="op">&lt;</span> df[<span class="st">'bathy'</span>]].T)</span>
<span id="cb20-20"><a href="#cb20-20" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb20-21"><a href="#cb20-21" tabindex="-1"></a>   <span class="bu">print</span>(<span class="st">'None'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>maximumDepthInMeters deeper than GEBCO bathymetry:
                                                                              4
eventID                                                  IYS:GoA2019:Stn5:trawl
parentEventID                                                  IYS:GoA2019:Stn5
eventDate                             2019-02-22T09:49:00Z/2019-02-22T10:49:00Z
year                                                                       2019
month                                                                         2
day                                                                          22
decimalLatitude                                                       67.399004
decimalLongitude                                                    -139.552501
footprintWKT                   LINESTRING ( -139.583 67.397 , -139.522 67.401 )
coordinateUncertaintyInMeters                                       2313.094678
minimumDepthInMeters                                                          0
maximumDepthInMeters                                                       33.2
samplingProtocol                                                 midwater trawl
locality                                                                    NaN
locationID                                                                  NaN
type                                                             midwater trawl
row                                                                           5
bathy                                                                     306.0
neg_maximumDepthInMeters                                                  -33.2</code></pre>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="tip" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip" class="callout-inner">
<h3 class="callout-title">
<span class="emoji" data-emoji="pushpin">📌</span> Tip</h3>
<div class="callout-content">
<ul>
<li>In some cases you’ll want to ensure the values are representative of
the entity you are reporting.</li>
<li>For example, <a href="https://dwc.tdwg.org/terms/#dwc:individualCount" class="external-link"><code>individualCount</code></a>
should be an integer. So, checking that column for integer values would
be good.</li>
</ul>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Several packages (e.g. obistools, Hmisc, pandas) can be used to
QA/QC data.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-07-validation-and-publishing"><p>Content from <a href="07-validation-and-publishing.html">Metadata and publishing</a></p>
<hr>
<p>Last updated on 2025-02-28 |

        <a href="https://github.com/MathewBiddle/test_workshop/edit/main/episodes/07-validation-and-publishing.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 120 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How are my data published?</li>
<li>What metadata are required for publishing?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Showing data publishing pipeline</li>
<li>Introducing the IPT</li>
<li>Introduction to EML</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="data-publishing-pipeline">Data Publishing Pipeline<a class="anchor" aria-label="anchor" href="#data-publishing-pipeline"></a>
</h2>
<hr class="half-width">
<p>After going through QAQC and being standardized to Darwin Core, the
dataset are uploaded to an IPT.<br>
Metadata is added in the form of EML and the dataset published as a
Darwin Core Archive (DwC-A). The data are then pushed to central OBIS.
Each dataset also has the option of being pushed to GBIF by registering
the resource with GBIF in the IPT.</p>
<figure><img src="../fig/DwC_workflow.jpg" alt="Image by Enrique Montes" class="figure mx-auto d-block"><div class="figcaption">Image by Enrique Montes</div>
</figure><p><em>Data publishing pipeline. Image credit: Enrique Montes</em></p>
</section><section><h2 class="section-heading" id="integrated-publishing-toolkit">Integrated Publishing Toolkit<a class="anchor" aria-label="anchor" href="#integrated-publishing-toolkit"></a>
</h2>
<hr class="half-width">
<p>The <a href="https://www.gbif.org/ipt" class="external-link">Integrated Publishing Toolkit
(IPT)</a> is an open-source web application developed and maintained by
the Global Biodiversity Information Facility (GBIF) for publishing
biodiversity data. The IPT makes it easy to share four types of
biodiversity-related information:</p>
<ul>
<li>primary taxon occurrence data</li>
<li>sampling event data</li>
<li>general metadata about data sources</li>
<li>taxon checklists</li>
</ul>
<p>GBIF maintains a very detailed <a href="https://ipt.gbif.org/manual/en/ipt/latest/" class="external-link">IPT manual</a> and the
<a href="https://manual.obis.org/data_publication.html" class="external-link">OBIS Manual</a>
offers OBIS-specific details on publishing through the IPT. You can
choose to download and install your own instance of the IPT but it might
be complicated to register it with OBIS. Instead it’s recommended to
work with one of the OBIS nodes to publish your data through their IPT.
<a href="https://obis.org/contact/" class="external-link">OBIS nodes</a> publish data that are
logical for their region or theme. After publishing the data through
their IPT the data are harvested by central OBIS.</p>
<p>The requirements for publishing via an OBIS node IPT are that:</p>
<ol style="list-style-type: decimal">
<li>you have contacted the node to ensure the data are a good fit for
that node</li>
<li>the data follows Darwin Core (DwC) and Ecological Metadata Language
(EML)</li>
<li>includes the required Darwin Core and EML metadata elements</li>
</ol></section><section><h2 class="section-heading" id="ecological-metadata-language-eml">Ecological Metadata Language (EML)<a class="anchor" aria-label="anchor" href="#ecological-metadata-language-eml"></a>
</h2>
<hr class="half-width">
<p>Both OBIS and GBIF use <a href="https://eml.ecoinformatics.org/" class="external-link">Ecological Metadata Language
(EML)</a> as the metadata standard associated with the data. For the
purposes of this workshop we will not dive into the world of EML.
However, we should note that when publishing your data through the IPT,
the IPT helps you create an EML file as part of the DwC-A. As such, if
you publish your own data through the IPT, there is no need for innate
knowledge on the EML format. But there are a minimum required number of
fields that would need to be filled out in the IPT: <code>title</code>,
<code>abstract</code>, <code>citation</code>, and several
<code>contacts</code>.</p>
<p>More information on EML can be found at the <a href="https://eml.ecoinformatics.org/" class="external-link">EML standard page</a>, and in the
<a href="https://ioos.github.io/bio_data_guide/extras.html#ecological-metadata-language-eml" class="external-link">bio
data guide</a>. There are also a number of R packages for working with
EML, reviewed <a href="https://livingnorway.github.io/LivingNorwayR/articles/EML_R_packages_overview.html" class="external-link">here</a>.</p>
<div id="tip" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip" class="callout-inner">
<h3 class="callout-title">
<span class="emoji" data-emoji="pushpin">📌</span> Tip</h3>
<div class="callout-content">
<p>Try to collect as much of this information as possible before and
during the Darwin Core alignment process. It will significantly reduce
the amount of time it takes to load the data into the IPT.</p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="required-eml-metadata-fields-for-sharing-to-obis">Required EML metadata fields for sharing to OBIS<a class="anchor" aria-label="anchor" href="#required-eml-metadata-fields-for-sharing-to-obis"></a>
</h3>
<p><em>Best practices for these fields are explained in detail in the <a href="https://manual.obis.org/eml" class="external-link">OBIS manual</a></em></p>
<table class="table">
<colgroup>
<col width="37%">
<col width="37%">
<col width="25%">
</colgroup>
<thead><tr class="header">
<th>EML Fields</th>
<th>Definition</th>
<th>Comment</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>Title</code></td>
<td>A good descriptive title is indispensable and can provide the user
with valuable information, making the discovery of data easier.</td>
<td>The IPT also requires you to provide a Shortname. Shortnames serve
as an identifier for the resource within the IPT installation and should
be unique, descriptive and short (max. 100 characters). Spell out
acronyms in Title but they are ok to use in the shortname.</td>
</tr>
<tr class="even">
<td><code>Abstract</code></td>
<td>The abstract or description of a dataset provides basic information
on the content of the dataset. The information in the abstract should
improve understanding and interpretation of the data.</td>
<td></td>
</tr>
<tr class="odd">
<td><code>Data License</code></td>
<td>The license that you apply to the resource. The license provides a
standardized way to define appropriate uses of your work.</td>
<td>Must use CC-0, CC-BY, or CC-BY-NC. Description of the licenses can
be found <a href="https://manual.obis.org/policy.html#data-sharing-agreement" class="external-link">here</a>.</td>
</tr>
<tr class="even">
<td><code>Resource Contact(s)</code></td>
<td>The list of people and organizations that should be contacted to get
more information about the resource, that curate the resource or to whom
putative problems with the resource or its data should be
addressed.</td>
<td>Last name, Position, and Organization are required, helpful to
include an ORCID and a contact method like email or phone number.</td>
</tr>
<tr class="odd">
<td><code>Resource Creator(s)</code></td>
<td>The people and organizations who created the resource, in priority
order. The list will be used to auto-generate the resource citation (if
auto-generation is turned on).</td>
<td></td>
</tr>
<tr class="even">
<td><code>Metadata Provider(s)</code></td>
<td>the people and organizations responsible for producing the resource
metadata.</td>
<td></td>
</tr>
<tr class="odd">
<td><code>Citation</code></td>
<td>The dataset citation allows users to properly cite the datasets in
further publications or other uses of the data. The OBIS download
function provides a list of the dataset citations packaged with the data
in a zipped file.</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="other-eml-fields-to-consider">Other EML fields to consider<a class="anchor" aria-label="anchor" href="#other-eml-fields-to-consider"></a>
</h3>
<table class="table">
<colgroup>
<col width="55%">
<col width="25%">
<col width="19%">
</colgroup>
<thead><tr class="header">
<th>EML Fields</th>
<th>Definition</th>
<th>Comment</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>Bounding Box</code></td>
<td>Farthest North, South, East, and West coordinate.</td>
<td></td>
</tr>
<tr class="even">
<td><code>Geographic Description</code></td>
<td>A textual description of the geographic coverage.</td>
<td></td>
</tr>
<tr class="odd">
<td><code>Temporal Coverage</code></td>
<td>This can either be a Single Date, Date Range, Formation Period, or
Living Time Period.</td>
<td></td>
</tr>
<tr class="even">
<td><code>Study Extent</code></td>
<td>This field represents both a specific sampling area and the sampling
frequency (temporal boundaries, frequency of occurrence) of the
project.</td>
<td></td>
</tr>
<tr class="odd">
<td><code>Sampling Description</code></td>
<td>This field allows for a text-based/human readable description of the
sampling procedures used in the research project.</td>
<td>The content of this element would be similar to a description of
sampling procedures found in the methods section of a journal
article.</td>
</tr>
<tr class="even">
<td><code>Step Description</code></td>
<td>This field allows for repeated sets of elements that document a
series of methods and procedures used in the study, and the processing
steps leading to the production of the data files. These include
e.g. text descriptions of the procedures, relevant literature, software,
instrumentation and any quality control measurements taken.</td>
<td>Each method should be described in enough detail to allow other
researchers to interpret and repeat the study, if required.</td>
</tr>
</tbody>
</table>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>The IPT is a well-documented and flexible system for publishing data
to OBIS</li>
<li>Some Darwin Core and Ecological Metadata Language fields are
required for publishing to OBIS.</li>
<li>Strive to write more than the minimal metadata</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section><section id="aio-08-post-workshop"><p>Content from <a href="08-post-workshop.html">Continuing the Conversation</a></p>
<hr>
<p>Last updated on 2025-02-28 |

        <a href="https://github.com/MathewBiddle/test_workshop/edit/main/episodes/08-post-workshop.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 120 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I continue my work after the workshop?</li>
<li>Where do I go to look for help with DwC alignment?</li>
<li>How do I provide feedback about this workshop?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn how to interact with the SMBD group.</li>
<li>Complete the (optional) post-workshop survey.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="thank-you-for-attending-the-workshop">Thank you for attending the workshop!<a class="anchor" aria-label="anchor" href="#thank-you-for-attending-the-workshop"></a>
</h2>
<hr class="half-width">
<p>Our hope is that you were already able to submit your data to OBIS
but often work needs to continue beyond the workshop. This page lists
some resources to help get your data the rest of the way into OBIS.</p>
</section><section><h2 class="section-heading" id="the-standardizing-marine-bio-data-group">The Standardizing Marine Bio Data Group<a class="anchor" aria-label="anchor" href="#the-standardizing-marine-bio-data-group"></a>
</h2>
<hr class="half-width">
<p>One of the primary goals of the “Standardizing Marine Bio Data”
(SMBD) exists to provide a space for individuals to help each other put
data into OBIS. Many from this workshop meet monthly at the SMBD and
interact asynchronously to offer help for those aligning to DwC. There
are two primary ways to interact with the SMBD:</p>
<div class="section level3">
<h3 id="monthly-smbd-meetings">Monthly SMBD Meetings<a class="anchor" aria-label="anchor" href="#monthly-smbd-meetings"></a>
</h3>
<p>Information about monthly SMBD meetings can be found on the SMBD
GitHub page <a href="https://github.com/ioos/bio_data_guide#-how-to-participate" class="external-link">here</a>.
Anyone is welcome to attend - we are a small community of individuals
who are passionate about getting data into OBIS, DwC, other standard
forms.</p>
</div>
<div class="section level3">
<h3 id="smbd-github-issue-tracker">SMBD GitHub Issue Tracker<a class="anchor" aria-label="anchor" href="#smbd-github-issue-tracker"></a>
</h3>
<p>You are also welcome to open an “issue” in the <a href="https://github.com/ioos/bio_data_guide/issues" class="external-link">SMBD GitHub Issue
tracker</a>. This issue tracker is not just for “issue reporting” -
please use it to ask questions or start discussions about your data.</p>
</div>
<div class="section level3">
<h3 id="add-your-dataset-as-an-example">Add Your Dataset as an Example<a class="anchor" aria-label="anchor" href="#add-your-dataset-as-an-example"></a>
</h3>
<p>You can upload your dataset into the <code>/datasets/</code>
directory so that the SMBD community can learn from your work and help
finish up any remaining work.</p>
<div id="tip" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip" class="callout-inner">
<h3 class="callout-title">
<span class="emoji" data-emoji="pushpin">📌</span> Tip</h3>
<div class="callout-content">
<p>More information about the SMBD group can be found at <a href="https://github.com/ioos/bio_data_guide" class="external-link">https://github.com/ioos/bio_data_guide</a>.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="post-workshop-survey">Post-Workshop Survey<a class="anchor" aria-label="anchor" href="#post-workshop-survey"></a>
</h2>
<hr class="half-width">
<p>If you wish to provide feedback please use <a href="https://forms.gle/YfaJJDSNuJWofPjy6" class="external-link">this post-workshop
survey</a>.</p>
</section><section><h2 class="section-heading" id="obis-manual">OBIS Manual<a class="anchor" aria-label="anchor" href="#obis-manual"></a>
</h2>
<hr class="half-width">
<p>If you are interested in continuing to learn about data formatting
and mobilization, the <a href="https://manual.obis.org/" class="external-link">OBIS Manual</a>
contains a lot of relevant content and guidelines for data
standardization.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>The Standardizing Marine Bio Data (SBMD) group is available to
help.</li>
<li>The SMBD meets monthly and you are welcome to join.</li>
<li>The SMBD github issue tracker is the best place to reach out for
help.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/MathewBiddle/test_workshop/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/MathewBiddle/test_workshop/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/MathewBiddle/test_workshop/" class="external-link">Source</a></p>
				<p><a href="https://github.com/MathewBiddle/test_workshop/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:https://obis.org/contact/" class="external-link">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.12" class="external-link">sandpaper (0.16.12)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.6" class="external-link">varnish (1.0.6)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://MathewBiddle.github.io/test_workshop/instructor/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://MathewBiddle.github.io/test_workshop/instructor/aio.html",
  "identifier": "https://MathewBiddle.github.io/test_workshop/instructor/aio.html",
  "dateCreated": "2024-04-19",
  "dateModified": "2025-05-20",
  "datePublished": "2025-05-20"
}

  </script><script>
		feather.replace();
	</script>
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

